"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[8166],{3905:(e,t,n)=>{n.d(t,{Zo:()=>m,kt:()=>c});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var o=a.createContext({}),s=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},m=function(e){var t=s(e.components);return a.createElement(o.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,o=e.parentName,m=p(e,["components","mdxType","originalType","parentName"]),u=s(n),c=r,g=u["".concat(o,".").concat(c)]||u[c]||d[c]||l;return n?a.createElement(g,i(i({ref:t},m),{},{components:n})):a.createElement(g,i({ref:t},m))}));function c(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,i=new Array(l);i[0]=u;var p={};for(var o in t)hasOwnProperty.call(t,o)&&(p[o]=t[o]);p.originalType=e,p.mdxType="string"==typeof e?e:r,i[1]=p;for(var s=2;s<l;s++)i[s]=n[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},20149:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>i,default:()=>d,frontMatter:()=>l,metadata:()=>p,toc:()=>s});var a=n(87462),r=(n(67294),n(3905));const l={title:"SpringBoot \u6574\u5408 MyBatisPlus",description:"SpringBoot \u6574\u5408 MyBatisPlus",slug:"springboot-mybatis",sidebar_position:9,keywords:["\u7b14\u8bb0"],tags:["SpringBoot"],draft:!1,hide_table_of_contents:!1,last_update:{date:"2022-11-24 20:24",author:"Hans"}},i=void 0,p={unversionedId:"springboot/SpringBoot \u6574\u5408 MyBatisPlus",id:"springboot/SpringBoot \u6574\u5408 MyBatisPlus",title:"SpringBoot \u6574\u5408 MyBatisPlus",description:"SpringBoot \u6574\u5408 MyBatisPlus",source:"@site/wiki/spring/springboot/09-SpringBoot \u6574\u5408 MyBatisPlus.md",sourceDirName:"springboot",slug:"/springboot/springboot-mybatis",permalink:"/wiki/spring/springboot/springboot-mybatis",draft:!1,tags:[{label:"SpringBoot",permalink:"/wiki/spring/tags/spring-boot"}],version:"current",lastUpdatedBy:"Hans",lastUpdatedAt:1669292640,formattedLastUpdatedAt:"2022\u5e7411\u670824\u65e5",sidebarPosition:9,frontMatter:{title:"SpringBoot \u6574\u5408 MyBatisPlus",description:"SpringBoot \u6574\u5408 MyBatisPlus",slug:"springboot-mybatis",sidebar_position:9,keywords:["\u7b14\u8bb0"],tags:["SpringBoot"],draft:!1,hide_table_of_contents:!1,last_update:{date:"2022-11-24 20:24",author:"Hans"}},sidebar:"tutorialSidebar",previous:{title:"SpringBoot \u6574\u5408 JPA",permalink:"/wiki/spring/springboot/springboot-jpa"},next:{title:"SpringBoot\u81ea\u5b9a\u4e49starter",permalink:"/wiki/spring/springboot/springboot-starter"}},o={},s=[{value:"\u7b80\u4ecb",id:"\u7b80\u4ecb",level:2},{value:"\u652f\u6301\u7684\u6570\u636e\u5e93",id:"\u652f\u6301\u7684\u6570\u636e\u5e93",level:3},{value:"\u5feb\u901f\u5f00\u59cb",id:"\u5feb\u901f\u5f00\u59cb",level:2},{value:"\u4f7f\u7528\u8be6\u89e3",id:"\u4f7f\u7528\u8be6\u89e3",level:2},{value:"mybatis-plus \u81ea\u5b9a\u4e49\u914d\u7f6e\u9879",id:"mybatis-plus-\u81ea\u5b9a\u4e49\u914d\u7f6e\u9879",level:3},{value:"\u5e38\u7528\u6ce8\u89e3",id:"\u5e38\u7528\u6ce8\u89e3",level:3},{value:"\u6761\u4ef6\u6784\u9020\u5668",id:"\u6761\u4ef6\u6784\u9020\u5668",level:3},{value:"\u63d2\u4ef6",id:"\u63d2\u4ef6",level:2},{value:"\u5206\u9875\u63d2\u4ef6",id:"\u5206\u9875\u63d2\u4ef6",level:3},{value:"\u4e50\u89c2\u9501\u63d2\u4ef6",id:"\u4e50\u89c2\u9501\u63d2\u4ef6",level:3},{value:"\u4ee3\u7801\u751f\u6210\u5668",id:"\u4ee3\u7801\u751f\u6210\u5668",level:2},{value:"\u5e38\u89c1\u95ee\u9898",id:"\u5e38\u89c1\u95ee\u9898",level:2},{value:"xml\u6587\u4ef6\u8def\u5f84",id:"xml\u6587\u4ef6\u8def\u5f84",level:3},{value:"mybatis\u4f20\u5165\u591a\u4e2a\u53c2\u6570\u7684\u65b9\u6cd5",id:"mybatis\u4f20\u5165\u591a\u4e2a\u53c2\u6570\u7684\u65b9\u6cd5",level:3},{value:"MyBatis\u4e2d#\u4e0e$\u7684\u533a\u522b",id:"mybatis\u4e2d\u4e0e\u7684\u533a\u522b",level:3},{value:"Mapper.xml \u793a\u4f8b",id:"mapperxml-\u793a\u4f8b",level:3},{value:"CDATA",id:"cdata",level:3}],m={toc:s};function d(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"\u7b80\u4ecb"},"\u7b80\u4ecb"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"MyBatis-Plus \uff08\u7b80\u79f0 MP\uff09\u662f\u4e00\u4e2a MyBatis \u7684\u589e\u5f3a\u5de5\u5177\uff0c\u5728 MyBatis \u7684\u57fa\u7840\u4e0a\u53ea\u505a\u589e\u5f3a\u4e0d\u505a\u6539\u53d8\uff0c\u4e3a\u7b80\u5316\u5f00\u53d1\u3001\u63d0\u9ad8\u6548\u7387\u800c\u751f\u3002")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5b98\u7f51\uff1a",(0,r.kt)("a",{parentName:"li",href:"https://baomidou.com/"},"https://baomidou.com/")),(0,r.kt)("li",{parentName:"ul"},"Github\uff1a",(0,r.kt)("a",{parentName:"li",href:"https://github.com/baomidou/mybatis-plus"},"https://github.com/baomidou/mybatis-plus")),(0,r.kt)("li",{parentName:"ul"},"\u4ee3\u7801\u793a\u4f8b\u5e93\uff1a",(0,r.kt)("a",{parentName:"li",href:"https://github.com/baomidou/mybatis-plus-samples"},"https://github.com/baomidou/mybatis-plus-samples"))),(0,r.kt)("h3",{id:"\u652f\u6301\u7684\u6570\u636e\u5e93"},"\u652f\u6301\u7684\u6570\u636e\u5e93"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"MySQL\uff0cOracle\uff0cDB2\uff0cH2\uff0cHSQL\uff0cSQLite\uff0cPostgreSQL\uff0cSQLServer\uff0cPhoenix\uff0cGauss \uff0cClickHouse\uff0cSybase\uff0cOceanBase\uff0cFirebird\uff0cCubrid\uff0cGoldilocks\uff0ccsiidb")),(0,r.kt)("h2",{id:"\u5feb\u901f\u5f00\u59cb"},"\u5feb\u901f\u5f00\u59cb"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u5f15\u5165\u4f9d\u8d56")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},"<properties>\n    <mybatis-plus.version>3.5.2</mybatis-plus.version>\n</properties>\n\n<dependency>\n    <groupId>com.baomidou</groupId>\n    <artifactId>mybatis-plus-boot-starter</artifactId>\n    <version>${mybatis-plus.version}</version>\n</dependency>\n")),(0,r.kt)("admonition",{type:"warning"},(0,r.kt)("p",{parentName:"admonition"},"\u5f15\u5165 MyBatis-Plus \u4e4b\u540e\u8bf7\u4e0d\u8981\u518d\u6b21\u5f15\u5165 MyBatis \u4ee5\u53ca MyBatis-Spring\uff0c\u4ee5\u907f\u514d\u56e0\u7248\u672c\u5dee\u5f02\u5bfc\u81f4\u7684\u95ee\u9898")),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"\u5b9a\u4e49\u5b9e\u4f53\u53ca\u5bf9\u5e94Mapper")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'@Data\n@TableName("t_user")\npublic class User implements Serializable {\n\n    private Long id;\n    private String name;\n    private Integer age;\n    private String email;\n\n}\n\npublic interface UserMapper extends BaseMapper<User> {\n}\n')),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},"\u914d\u7f6e")),(0,r.kt)("p",null,"\u5728 Spring Boot \u542f\u52a8\u7c7b\u4e2d\u6dfb\u52a0 @MapperScan \u6ce8\u89e3\uff0c\u6307\u5b9amapper\u626b\u63cf\u8def\u5f84"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'@SpringBootApplication\n@MapperScan(basePackages = "com.hans.tech.springboot.dao.mapper")\npublic class MyBatisPlusApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(MyBatisPlusApplication.class, args);\n    }\n\n}\n')),(0,r.kt)("ol",{start:4},(0,r.kt)("li",{parentName:"ol"},"\u7b80\u5355\u6d4b\u8bd5")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},"@SpringBootTest\nclass UserMapperTest {\n\n    @Autowired\n    private UserMapper userMapper;\n\n    @Test\n    void simpleTest() {\n        List<User> users = userMapper.selectList(null);\n        Assertions.assertEquals(5, users.size());\n        users.forEach(System.out::println);\n    }\n\n}\n")),(0,r.kt)("h2",{id:"\u4f7f\u7528\u8be6\u89e3"},"\u4f7f\u7528\u8be6\u89e3"),(0,r.kt)("h3",{id:"mybatis-plus-\u81ea\u5b9a\u4e49\u914d\u7f6e\u9879"},"mybatis-plus \u81ea\u5b9a\u4e49\u914d\u7f6e\u9879"),(0,r.kt)("p",null,"mybatis-plus \u914d\u7f6e\u8be6\u89e3\uff1a",(0,r.kt)("a",{parentName:"p",href:"https://baomidou.com/pages/56bac0/"},"https://baomidou.com/pages/56bac0/")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"mybatis-plus:\n  ......\n  configuration:\n    ......\n  global-config:\n    ......\n    db-config:\n      ......\n")),(0,r.kt)("p",null,"\u5e38\u7528\u914d\u7f6e"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"mybatis-plus:\n  mapper-locations: classpath*:/mapper/*.xml\n  configuration:\n    map-underscore-to-camel-case: true\n  global-config:\n    banner: false\n    db-config:\n      table-prefix: t_\n")),(0,r.kt)("h3",{id:"\u5e38\u7528\u6ce8\u89e3"},"\u5e38\u7528\u6ce8\u89e3"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"@TableName"),"\uff1a\u6807\u8bc6\u5b9e\u4f53\u7c7b\u5bf9\u5e94\u7684\u8868")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"\u5c5e\u6027"),(0,r.kt)("th",{parentName:"tr",align:"left"},"\u7c7b\u578b"),(0,r.kt)("th",{parentName:"tr",align:"left"},"\u5fc5\u987b\u6307\u5b9a"),(0,r.kt)("th",{parentName:"tr",align:"left"},"\u9ed8\u8ba4\u503c"),(0,r.kt)("th",{parentName:"tr",align:"left"},"\u63cf\u8ff0"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"value"),(0,r.kt)("td",{parentName:"tr",align:"left"},"String"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u5426"),(0,r.kt)("td",{parentName:"tr",align:"left"},'""'),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u8868\u540d")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"keepGlobalPrefix"),(0,r.kt)("td",{parentName:"tr",align:"left"},"boolean"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u5426"),(0,r.kt)("td",{parentName:"tr",align:"left"},"false"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u662f\u5426\u4fdd\u6301\u4f7f\u7528\u5168\u5c40\u7684 tablePrefix \u7684\u503c\uff08\u5f53\u5168\u5c40 tablePrefix \u751f\u6548\u65f6\uff09")))),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"@TableId"),"\uff1a\u4e3b\u952e\u6ce8\u89e3")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"\u5c5e\u6027"),(0,r.kt)("th",{parentName:"tr",align:"left"},"\u7c7b\u578b"),(0,r.kt)("th",{parentName:"tr",align:"left"},"\u5fc5\u987b\u6307\u5b9a"),(0,r.kt)("th",{parentName:"tr",align:"left"},"\u9ed8\u8ba4\u503c"),(0,r.kt)("th",{parentName:"tr",align:"left"},"\u63cf\u8ff0"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"value"),(0,r.kt)("td",{parentName:"tr",align:"left"},"String"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u5426"),(0,r.kt)("td",{parentName:"tr",align:"left"},'""'),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u4e3b\u952e\u5b57\u6bb5\u540d")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"type"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Enum"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u5426"),(0,r.kt)("td",{parentName:"tr",align:"left"},"IdType.NONE"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u6307\u5b9a\u4e3b\u952e\u7c7b\u578b")))),(0,r.kt)("p",null,"IdType\u7c7b\u578b"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"\u503c"),(0,r.kt)("th",{parentName:"tr",align:"left"},"\u63cf\u8ff0"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"AUTO"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u6570\u636e\u5e93 ID \u81ea\u589e")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"NONE"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u65e0\u72b6\u6001\uff0c\u8be5\u7c7b\u578b\u4e3a\u672a\u8bbe\u7f6e\u4e3b\u952e\u7c7b\u578b\uff08\u6ce8\u89e3\u91cc\u7b49\u4e8e\u8ddf\u968f\u5168\u5c40\uff0c\u5168\u5c40\u91cc\u7ea6\u7b49\u4e8e INPUT\uff09")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"INPUT"),(0,r.kt)("td",{parentName:"tr",align:"left"},"insert \u524d\u81ea\u884c set \u4e3b\u952e\u503c")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"ASSIGN_ID"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u5206\u914d ID(\u4e3b\u952e\u7c7b\u578b\u4e3a Number(Long \u548c Integer)\u6216 String)(since 3.3.0),\u4f7f\u7528\u63a5\u53e3",(0,r.kt)("inlineCode",{parentName:"td"},"IdentifierGenerator"),"\u7684\u65b9\u6cd5",(0,r.kt)("inlineCode",{parentName:"td"},"nextId"),"(\u9ed8\u8ba4\u5b9e\u73b0\u7c7b\u4e3a",(0,r.kt)("inlineCode",{parentName:"td"},"DefaultIdentifierGenerator"),"\u96ea\u82b1\u7b97\u6cd5)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"ASSIGN_UUID"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u5206\u914d UUID,\u4e3b\u952e\u7c7b\u578b\u4e3a String(since 3.3.0),\u4f7f\u7528\u63a5\u53e3",(0,r.kt)("inlineCode",{parentName:"td"},"IdentifierGenerator"),"\u7684\u65b9\u6cd5",(0,r.kt)("inlineCode",{parentName:"td"},"nextUUID"),"(\u9ed8\u8ba4 default \u65b9\u6cd5)")))),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"@TableField"),"\uff1a\u5b57\u6bb5\u6ce8\u89e3")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"\u5c5e\u6027"),(0,r.kt)("th",{parentName:"tr",align:"left"},"\u7c7b\u578b"),(0,r.kt)("th",{parentName:"tr",align:"left"},"\u5fc5\u987b\u6307\u5b9a"),(0,r.kt)("th",{parentName:"tr",align:"left"},"\u9ed8\u8ba4\u503c"),(0,r.kt)("th",{parentName:"tr",align:"left"},"\u63cf\u8ff0"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"value"),(0,r.kt)("td",{parentName:"tr",align:"left"},"String"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u5426"),(0,r.kt)("td",{parentName:"tr",align:"left"},'""'),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u6570\u636e\u5e93\u5b57\u6bb5\u540d")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"exist"),(0,r.kt)("td",{parentName:"tr",align:"left"},"boolean"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u5426"),(0,r.kt)("td",{parentName:"tr",align:"left"},"true"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u662f\u5426\u4e3a\u6570\u636e\u5e93\u8868\u5b57\u6bb5")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"update"),(0,r.kt)("td",{parentName:"tr",align:"left"},"String"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u5426"),(0,r.kt)("td",{parentName:"tr",align:"left"},'""'),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u5b57\u6bb5 ",(0,r.kt)("inlineCode",{parentName:"td"},"update set")," \u90e8\u5206\u6ce8\u5165\uff0c\u4f8b\u5982\uff1a\u5f53\u5728version\u5b57\u6bb5\u4e0a\u6ce8\u89e3",(0,r.kt)("inlineCode",{parentName:"td"},'update="%s+1"')," \u8868\u793a\u66f4\u65b0\u65f6\u4f1a ",(0,r.kt)("inlineCode",{parentName:"td"},"set version=version+1")," \uff08\u8be5\u5c5e\u6027\u4f18\u5148\u7ea7\u9ad8\u4e8e ",(0,r.kt)("inlineCode",{parentName:"td"},"el")," \u5c5e\u6027\uff09")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"insertStrategy"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Enum"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u5426"),(0,r.kt)("td",{parentName:"tr",align:"left"},"FieldStrategy.DEFAULT"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u4e3e\u4f8b\uff1aNOT_NULL ",(0,r.kt)("inlineCode",{parentName:"td"},'insert into table_a(<if test="columnProperty != null">column</if>) values (<if test="columnProperty != null">#{columnProperty}</if>)'))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"updateStrategy"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Enum"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u5426"),(0,r.kt)("td",{parentName:"tr",align:"left"},"FieldStrategy.DEFAULT"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u4e3e\u4f8b\uff1aIGNORED ",(0,r.kt)("inlineCode",{parentName:"td"},"update table_a set column=#{columnProperty}"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"whereStrategy"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Enum"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u5426"),(0,r.kt)("td",{parentName:"tr",align:"left"},"FieldStrategy.DEFAULT"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u4e3e\u4f8b\uff1aNOT_EMPTY ",(0,r.kt)("inlineCode",{parentName:"td"},"where <if test=\"columnProperty != null and columnProperty!=''\">column=#{columnProperty}</if>"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"jdbcType"),(0,r.kt)("td",{parentName:"tr",align:"left"},"JdbcType"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u5426"),(0,r.kt)("td",{parentName:"tr",align:"left"},"JdbcType.UNDEFINED"),(0,r.kt)("td",{parentName:"tr",align:"left"},"JDBC \u7c7b\u578b (\u8be5\u9ed8\u8ba4\u503c\u4e0d\u4ee3\u8868\u4f1a\u6309\u7167\u8be5\u503c\u751f\u6548)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"typeHandler"),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"Class<? extends TypeHandler>")),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u5426"),(0,r.kt)("td",{parentName:"tr",align:"left"},"UnknownTypeHandler.class"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u7c7b\u578b\u5904\u7406\u5668 (\u8be5\u9ed8\u8ba4\u503c\u4e0d\u4ee3\u8868\u4f1a\u6309\u7167\u8be5\u503c\u751f\u6548)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"fill"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Enum"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u5426"),(0,r.kt)("td",{parentName:"tr",align:"left"},"FieldFill.DEFAULT"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u5b57\u6bb5\u81ea\u52a8\u586b\u5145\u7b56\u7565")))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"FieldStrategy")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"\u503c"),(0,r.kt)("th",{parentName:"tr",align:"left"},"\u63cf\u8ff0"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"IGNORED"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u5ffd\u7565\u5224\u65ad")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"NOT_NULL"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u975e NULL \u5224\u65ad")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"NOT_EMPTY"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u975e\u7a7a\u5224\u65ad(\u53ea\u5bf9\u5b57\u7b26\u4e32\u7c7b\u578b\u5b57\u6bb5,\u5176\u4ed6\u7c7b\u578b\u5b57\u6bb5\u4f9d\u7136\u4e3a\u975e NULL \u5224\u65ad)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"DEFAULT"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u8ffd\u968f\u5168\u5c40\u914d\u7f6e")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"NEVER"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u4e0d\u52a0\u5165SQL")))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"FieldFill")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"\u503c"),(0,r.kt)("th",{parentName:"tr",align:"left"},"\u63cf\u8ff0"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"DEFAULT"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u9ed8\u8ba4\u4e0d\u5904\u7406")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"INSERT"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u63d2\u5165\u65f6\u586b\u5145\u5b57\u6bb5")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"UPDATE"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u66f4\u65b0\u65f6\u586b\u5145\u5b57\u6bb5")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"INSERT_UPDATE"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\u63d2\u5165\u548c\u66f4\u65b0\u65f6\u586b\u5145\u5b57\u6bb5")))),(0,r.kt)("ol",{start:4},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"@Version"),": \u6807\u8bb0\u4e50\u89c2\u9501\u5b57\u6bb5")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"@TableLogic"),"\uff1a\u6807\u8bb0\u903b\u8f91\u5220\u9664\u5b57\u6bb5")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"@EnumValue"),"\uff1a\u6807\u8bb0\u679a\u4e3e\u5b57\u6bb5")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"@OrderBy"),"\uff1a\u5185\u7f6e SQL \u9ed8\u8ba4\u6307\u5b9a\u6392\u5e8f\uff0c\u4f18\u5148\u7ea7\u4f4e\u4e8e wrapper \u6761\u4ef6\u67e5\u8be2"))),(0,r.kt)("h3",{id:"\u6761\u4ef6\u6784\u9020\u5668"},"\u6761\u4ef6\u6784\u9020\u5668"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'@GetMapping("/child")\n@ApiOperation("\u67e5\u8be2\u5c0f\u4e8e18\u5c81\u7684\u7528\u6237")\npublic List<UserEntity> findAll() {\n    LambdaQueryWrapper<UserEntity> wrapper = lambdaQuery(UserEntity.class).lt(UserEntity::getAge, 18);\n    return userService.list(wrapper);\n}\n\n@GetMapping("/child2")\n@ApiOperation("\u67e5\u8be2\u5c0f\u4e8e18\u5c81\u7684\u7528\u6237")\npublic List<UserEntity> findAllV2() {\n    QueryWrapper<UserEntity> queryWrapper = new QueryWrapper<UserEntity>()\n            .lt("age", 18);\n    return userService.list(queryWrapper);\n}\n\n@ApiOperation("\u6839\u636e\u540d\u5b57\u66f4\u65b0age")\n@PostMapping("/updateByName")\npublic void updateByName() {\n    UpdateWrapper<UserEntity> updateWrapper = new UpdateWrapper<UserEntity>()\n            .eq("name", "Jack")\n            .set("age", 18);\n    userService.update(updateWrapper);\n}\n\n@ApiOperation("v2-\u6839\u636e\u540d\u5b57\u66f4\u65b0age")\n@PostMapping("/updateByName2")\npublic void updateByName2() {\n    LambdaQueryWrapper<UserEntity> queryWrapper = lambdaQuery(UserEntity.class).eq(UserEntity::getName, "Jack");\n    UserEntity userEntity = userService.getOne(queryWrapper);\n    userEntity.setAge(16);\n    userService.updateById(userEntity);\n}\n\n@ApiOperation("\u5206\u9875\u67e5\u8be2")\n@PostMapping("/page")\npublic IPage<UserEntity> pageQuery(int pageSize, int pageNo) {\n    IPage<UserEntity> page = new Page<>();\n    page.setCurrent(pageNo);\n    page.setSize(pageSize);\n    return userService.page(page);\n}\n')),(0,r.kt)("h2",{id:"\u63d2\u4ef6"},"\u63d2\u4ef6"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'@Configuration\n@MapperScan(basePackages = "com.hans.tech.springboot.user.mapper")\n@EnableTransactionManagement\npublic class MyBatisPlusConfig {\n\n    /**\n     * \u4e50\u89c2\u9501\u63d2\u4ef6\n     *\n     * @return \u62e6\u622a\u5668\n     */\n    @Bean\n    public MybatisPlusInterceptor mybatisPlusOptimisticInterceptor() {\n        MybatisPlusInterceptor interceptor = new MybatisPlusInterceptor();\n        interceptor.addInnerInterceptor(new OptimisticLockerInnerInterceptor());\n        return interceptor;\n    }\n\n    /**\n     * \u5206\u9875\u63d2\u4ef6\n     */\n    @Bean\n    public MybatisPlusInterceptor mybatisPlusPageInterceptor() {\n        MybatisPlusInterceptor interceptor = new MybatisPlusInterceptor();\n        interceptor.addInnerInterceptor(new PaginationInnerInterceptor(DbType.H2));\n        return interceptor;\n    }\n\n}\n')),(0,r.kt)("h3",{id:"\u5206\u9875\u63d2\u4ef6"},"\u5206\u9875\u63d2\u4ef6"),(0,r.kt)("h3",{id:"\u4e50\u89c2\u9501\u63d2\u4ef6"},"\u4e50\u89c2\u9501\u63d2\u4ef6"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Mybatis-plus\u7684\u4e50\u89c2\u9501\u53ea\u80fd\u7528\u4e8eupdateById(id) \u4e0e update(entity, wrapper) \u65b9\u6cd5\uff0c\u4e14\u66f4\u65b0\u4e4b\u524d\u9700\u8981\u5148\u67e5\u8be2verison\u4fe1\u606f\uff0c\u5426\u5219\u4e50\u89c2\u9501\u4f1a\u5931\u6548\u3002\n")),(0,r.kt)("h2",{id:"\u4ee3\u7801\u751f\u6210\u5668"},"\u4ee3\u7801\u751f\u6210\u5668"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Github: ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/baomidou/generator"},"https://github.com/baomidou/generator")),(0,r.kt)("li",{parentName:"ul"},"\u5b98\u65b9\u6587\u6863(\u914d\u7f6e\u8be6\u60c5)\uff1a",(0,r.kt)("a",{parentName:"li",href:"https://baomidou.com/pages/981406/"},"https://baomidou.com/pages/981406/"))),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u4f9d\u8d56")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},"<properties>\n    <knife4j.version>2.0.9</knife4j.version>\n    <mybatis-plus-generator.version>3.5.2</mybatis-plus-generator.version>\n    <mybatis-plus.version>3.5.2</mybatis-plus.version>\n</properties>\n\n<dependencies>\n    <dependency>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-web</artifactId>\n    </dependency>\n    <dependency>\n        <groupId>com.baomidou</groupId>\n        <artifactId>mybatis-plus-boot-starter</artifactId>\n        <version>${mybatis-plus.version}</version>\n    </dependency>\n    <dependency>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-freemarker</artifactId>\n        <scope>test</scope>\n    </dependency>\n    <dependency>\n        <groupId>com.h2database</groupId>\n        <artifactId>h2</artifactId>\n        <scope>runtime</scope>\n    </dependency>\n    <dependency>\n        <groupId>com.github.xiaoymin</groupId>\n        <artifactId>knife4j-spring-boot-starter</artifactId>\n        <version>${knife4j.version}</version>\n    </dependency>\n\n    <dependency>\n        <groupId>com.baomidou</groupId>\n        <artifactId>mybatis-plus-generator</artifactId>\n        <version>${mybatis-plus-generator.version}</version>\n        <scope>test</scope>\n    </dependency>\n    <dependency>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-test</artifactId>\n        <scope>test</scope>\n    </dependency>\n</dependencies>\n")),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"\u751f\u6210\u4ee3\u7801")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'package com.hans.tech.mybatisplus.generator;\n\nimport com.baomidou.mybatisplus.annotation.FieldFill;\nimport com.baomidou.mybatisplus.annotation.IdType;\nimport com.baomidou.mybatisplus.generator.FastAutoGenerator;\nimport com.baomidou.mybatisplus.generator.config.DataSourceConfig;\nimport com.baomidou.mybatisplus.generator.config.OutputFile;\nimport com.baomidou.mybatisplus.generator.config.rules.NamingStrategy;\nimport com.baomidou.mybatisplus.generator.engine.FreemarkerTemplateEngine;\nimport com.baomidou.mybatisplus.generator.fill.Column;\nimport com.baomidou.mybatisplus.generator.fill.Property;\nimport org.apache.ibatis.jdbc.ScriptRunner;\nimport org.junit.jupiter.api.BeforeAll;\nimport org.junit.jupiter.api.DisplayName;\nimport org.junit.jupiter.api.Test;\n\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.sql.Connection;\nimport java.sql.SQLException;\nimport java.util.Collections;\n\n/**\n * @author huhan\n */\npublic class FastAutoGeneratorTest {\n\n    /**\n     * \u6570\u636e\u6e90\u914d\u7f6e\n     */\n    private static final DataSourceConfig.Builder DATA_SOURCE_CONFIG = new DataSourceConfig\n            .Builder("jdbc:h2:mem:bootapp;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE;CASE_INSENSITIVE_IDENTIFIERS=TRUE;MODE=MYSQL", "sa", "");\n\n    private static final String PROJECT_PATH = "D:\\\\WorkSpaces\\\\GitHubWS\\\\spring-demos\\\\02-SPRING-BOOT\\\\057-orm-mybatisplus-generator\\\\";\n\n    @BeforeAll\n    public static void initDataSource() throws SQLException {\n        // \u6267\u884c\u6570\u636e\u5e93\u811a\u672c\n        DataSourceConfig dataSourceConfig = DATA_SOURCE_CONFIG.build();\n        Connection conn = dataSourceConfig.getConn();\n        InputStream inputStream = FastAutoGeneratorTest.class.getResourceAsStream("/sql/init.sql");\n        ScriptRunner scriptRunner = new ScriptRunner(conn);\n        scriptRunner.setAutoCommit(true);\n        scriptRunner.runScript(new InputStreamReader(inputStream));\n        conn.close();\n    }\n\n    @Test\n    @DisplayName("\u5feb\u901f\u751f\u6210\uff0c\u914d\u7f6e\u8be6\u89e3\uff1ahttps://github.com/baomidou/generator")\n    void quickGenerate() {\n        FastAutoGenerator.create(DATA_SOURCE_CONFIG)\n                // FastAutoGenerator.create("jdbc:mysql://127.0.0.1:3306/learn_springboot?useUnicode=true&characterEncoding=UTF-8&autoReconnect=true&useSSL=false", "root", "root")\n                // \u5168\u5c40\u914d\u7f6e\n                .globalConfig(builder -> {\n                    builder.author("huhan") // \u8bbe\u7f6e\u4f5c\u8005\n                            //.dateType(DateType.TIME_PACK) // \u65f6\u95f4\u7b56\u7565\n                            //.commentDate("") // \u6ce8\u91ca\u65e5\u671f,\u9ed8\u8ba4\u503c: yyyy-MM-dd\n                            .enableSwagger() // \u5f00\u542f swagger \u6a21\u5f0f\n                            .fileOverride() // \u8986\u76d6\u5df2\u751f\u6210\u6587\u4ef6,\u5df2\u5e9f\u5f03\n                            .outputDir(PROJECT_PATH + "src\\\\main\\\\java") // \u6307\u5b9a\u8f93\u51fa\u76ee\u5f55\n                            .disableOpenDir(); // \u7981\u6b62\u6253\u5f00\u8f93\u51fa\u76ee\u5f55\n                })\n                // \u5305\u914d\u7f6e\n                .packageConfig(builder -> {\n                    builder.parent("com.hans.tech.springboot") // \u8bbe\u7f6e\u7236\u5305\u540d\n                            .moduleName("user") // \u8bbe\u7f6e\u7236\u5305\u6a21\u5757\u540d\n                            //.entity("entity") // Entity \u5305\u540d\n                            //.service("service") // Service \u5305\u540d\n                            //.serviceImpl("service/impl") // ServiceImpl \u5305\u540d\n                            //.mapper("mapper") // mapper \u5305\u540d\n                            //.controller("controller") // controller \u5305\u540d\n                            // .xml("mapper.xml") // Mapper Xml \u5305\u540d\n                            .pathInfo(Collections.singletonMap(OutputFile.xml, PROJECT_PATH + "src\\\\main\\\\resources\\\\mapper")); // \u8bbe\u7f6emapperXml\u751f\u6210\u8def\u5f84\n                })\n                // \u6a21\u677f\u914d\u7f6e\n                .templateConfig(builder -> {\n                    //builder.disable(TemplateType.SERVICE); // \u7981\u7528\u6a21\u677f\n                    //.entity("/templates/entity.java"); // \u8bbe\u7f6e\u5b9e\u4f53\u6a21\u677f\u8def\u5f84(JAVA)\n                })\n                // \u7b56\u7565\u914d\u7f6e\uff1aEntity\u3001Mapper\u3001Service\u3001Controller\u7b56\u7565\u914d\u7f6e\n                .strategyConfig(builder -> {\n                    builder.enableSkipView() // \u5f00\u542f\u8df3\u8fc7\u89c6\u56fe\n                            //.enableCapitalMode() // \u5f00\u542f\u5927\u5199\u547d\u540d\n                            .addInclude("t_user") // \u8bbe\u7f6e\u9700\u8981\u751f\u6210\u7684\u8868\u540d\n                            .addTablePrefix("t_", "c_"); // \u8bbe\u7f6e\u8fc7\u6ee4\u8868\u524d\u7f00;\n\n                    // entity \u7b56\u7565\n                    builder.entityBuilder()\n                            // .superClass(BaseEntity.class)\n                            .disableSerialVersionUID()\n                            //.enableChainModel()\n                            .enableLombok()\n                            .enableRemoveIsPrefix()\n                            //.enableTableFieldAnnotation()\n                            //.enableActiveRecord()\n                            .versionColumnName("update_version")\n                            .versionPropertyName("updateVersion")\n                            // .logicDeleteColumnName("deleted")\n                            .logicDeletePropertyName("deleteFlag")\n                            .naming(NamingStrategy.underline_to_camel)\n                            .columnNaming(NamingStrategy.underline_to_camel)\n                            //.addSuperEntityColumns("id", "create_by", "create_time", "update_by", "update_time")\n                            //.addIgnoreColumns("age")\n                            .addTableFills(new Column("create_time", FieldFill.INSERT))\n                            .addTableFills(new Property("updateTime", FieldFill.INSERT_UPDATE))\n                            .idType(IdType.AUTO)\n                            .formatFileName("%sEntity");\n\n                    // mapper \u7b56\u7565\n                    builder.mapperBuilder()\n                            //.superClass(BaseMapper.class)\n                            //.enableMapperAnnotation()\n                            .enableBaseResultMap()\n                            .enableBaseColumnList()\n                            //.cache(MyMapperCache.class)\n                            .formatMapperFileName("%sDao")\n                            .formatXmlFileName("%sMapper");\n\n                    // service \u7b56\u7565\n                    builder.serviceBuilder()\n                            // .superServiceClass(BaseService.class)\n                            // .superServiceImplClass(BaseServiceImpl.class)\n                            .formatServiceFileName("%sService")\n                            .formatServiceImplFileName("%sServiceImpl");\n\n                    // controller \u7b56\u7565\n                    builder.controllerBuilder()\n                            //.superClass(BaseController.class)\n                            .enableHyphenStyle()\n                            .enableRestStyle();\n                    //.formatFileName("%sAction");\n\n                })\n                // \u4e5f\u652f\u6301\u81ea\u5b9a\u4e49\u6a21\u677f\n                .templateEngine(new FreemarkerTemplateEngine()) // \u4f7f\u7528Freemarker\u5f15\u64ce\u6a21\u677f\uff0c\u9ed8\u8ba4\u7684\u662fVelocity\u5f15\u64ce\u6a21\u677f\n                .execute();\n    }\n\n}\n\n')),(0,r.kt)("h2",{id:"\u5e38\u89c1\u95ee\u9898"},"\u5e38\u89c1\u95ee\u9898"),(0,r.kt)("h3",{id:"xml\u6587\u4ef6\u8def\u5f84"},"xml\u6587\u4ef6\u8def\u5f84"),(0,r.kt)("p",null,"MyBatis\u914d\u7f6e ",(0,r.kt)("inlineCode",{parentName:"p"},"mapper.xml")," \u6587\u4ef6\uff0c\u5982\u679c\u4e0d\u5728 ",(0,r.kt)("inlineCode",{parentName:"p"},"resources")," \u76ee\u5f55\u4e0b\uff0c\u800c\u662f\u5728 ",(0,r.kt)("inlineCode",{parentName:"p"},"src/java")," \u67d0\u4e2a\u5305\u4e0b\u9762\uff0c\u5728 ",(0,r.kt)("inlineCode",{parentName:"p"},"pom.xml")," \u6587\u4ef6\u4e2d\u9700\u8981\u52a0\u5165\u4ee5\u4e0b\u914d\u7f6e"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},"<build>\n    <resources>\n        <resource>\n            <directory>src/main/java</directory>\n            <includes>\n                <include>**/*.xml</include>\n            </includes>\n        </resource>\n    </resources>\n</build>\n")),(0,r.kt)("p",null,"\u5982\u679c\u5728 ",(0,r.kt)("inlineCode",{parentName:"p"},"resources")," \u76ee\u5f55\u4e0b\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"mapper"),"\u6587\u4ef6\u5939\u5185, mybatis-plus\u914d\u7f6e\u5982\u4e0b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"mybatis-plus:\n  mapper-locations: classpath*:/mapper/*.xml\n")),(0,r.kt)("h3",{id:"mybatis\u4f20\u5165\u591a\u4e2a\u53c2\u6570\u7684\u65b9\u6cd5"},"mybatis\u4f20\u5165\u591a\u4e2a\u53c2\u6570\u7684\u65b9\u6cd5"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u8f6c\u5316\u4e3amap\uff0c\u4f20\u5165map"),(0,r.kt)("li",{parentName:"ol"},"\u5728xml\u6587\u4ef6\u4e2d\u4f7f\u7528\u6237\u4e0b\u6807\uff0c\u6309\u987a\u5e8f\u4f20\u5165\u3002#{0},#{1}"),(0,r.kt)("li",{parentName:"ol"},"\u91c7\u7528\u6ce8\u91ca,",(0,r.kt)("inlineCode",{parentName:"li"},"@param(\u201cuserName\u201d) String name,@param(\u201cuserArea\u201d) String area"))),(0,r.kt)("h3",{id:"mybatis\u4e2d\u4e0e\u7684\u533a\u522b"},"MyBatis\u4e2d#\u4e0e$\u7684\u533a\u522b"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"#")," \u662f\u5c06\u4f20\u5165\u7684\u503c\u5f53\u505a\u5b57\u7b26\u4e32\u7684\u5f62\u5f0f\uff0ceg:select id,name,age from student where id =#{id},\u5f53\u524d\u7aef\u628aid\u503c1\uff0c\u4f20\u5165\u5230\u540e\u53f0\u7684\u65f6\u5019\uff0c\u5c31\u76f8\u5f53\u4e8e select id,name,age from student where id ='1'."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"$")," \u662f\u5c06\u4f20\u5165\u7684\u6570\u636e\u76f4\u63a5\u663e\u793a\u751f\u6210sql\u8bed\u53e5\uff0ceg:select id,name,age from student where id =${id},\u5f53\u524d\u7aef\u628aid\u503c1\uff0c\u4f20\u5165\u5230\u540e\u53f0\u7684\u65f6\u5019\uff0c\u5c31\u76f8\u5f53\u4e8e select id,name,age from student where id = 1."),(0,r.kt)("li",{parentName:"ol"},"\u4f7f\u7528#\u53ef\u4ee5\u5f88\u5927\u7a0b\u5ea6\u4e0a\u9632\u6b62sql\u6ce8\u5165\u3002(\u8bed\u53e5\u7684\u62fc\u63a5)"),(0,r.kt)("li",{parentName:"ol"},"\u4f46\u662f\u5982\u679c\u4f7f\u7528\u5728order by \u4e2d\u5c31\u9700\u8981\u4f7f\u7528 $")),(0,r.kt)("h3",{id:"mapperxml-\u793a\u4f8b"},"Mapper.xml \u793a\u4f8b"),(0,r.kt)("p",null,"insert \u8fd4\u56de\u4e3b\u952e"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'  <insert id="create" parameterType="com...model.User">  \n      <selectKey resultType="java.lang.Integer" order="AFTER" keyProperty="id">  \n          SELECT LAST_INSERT_ID() \n      </selectKey>  \n      INSERT INTO t_user(name, age, gender)  \n      VALUE(#{name},#{age},#{gender})</insert>\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<sql id="userColumns"> ${alias}.id,${alias}.username,${alias}.password </sql>\n\n<select id="selectUsers" resultType="map">\nselect\n\n    <include refid="userColumns">\n        <property name="alias" value="t1"/>\n    </include>,\n\n    <include refid="userColumns">\n        <property name="alias" value="t2"/>\n    </include>\nfrom some_table t1\ncross join some_table t2\n\n</select>\n')),(0,r.kt)("p",null,"\u6bd4\u8f83\u590d\u6742\u7684\u5173\u8054\u5173\u7cfb"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<resultMap id="detailedBlogResultMap" type="Blog">\n    <constructor>\n        <idArg column="blog_id" javaType="int"/>\n    </constructor>\n    <result property="title" column="blog_title"/>\n    <association property="author" javaType="Author">\n        <id property="id" column="author_id"/>\n        <result property="username" column="author_username"/>\n        <result property="password" column="author_password"/>\n        <result property="email" column="author_email"/>\n        <result property="bio" column="author_bio"/>\n        <result property="favouriteSection" column="author_favourite_section"/>\n    </association>\n    <collection property="posts" ofType="Post">\n        <id property="id" column="post_id"/>\n        <result property="subject" column="post_subject"/>\n        <association property="author" javaType="Author"/>\n        <collection property="comments" ofType="Comment">\n            <id property="id" column="comment_id"/>\n        </collection>\n        <collection property="tags" ofType="Tag">\n            <id property="id" column="tag_id"/>\n        </collection>\n        <discriminator javaType="int" column="draft">\n            <case value="1" resultType="DraftPost"/>\n        </discriminator>\n    </collection>\n</resultMap>\n')),(0,r.kt)("p",null,"\u52a8\u6001SQL"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"if")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<select id="findActiveBlogLike" resultType="Blog">\nSELECT * FROM BLOG WHERE state = \u2018ACTIVE\u2019\n    <if test="title != null">\n        AND title like #{title}\n    </if>\n    <if test="author != null and author.name != null">\n        AND author_name like #{author.name}\n    </if>\n</select>\n')),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"choose, when, otherwise")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<select id="findActiveBlogLike" resultType="Blog">\n    SELECT * FROM BLOG WHERE state = \u2018ACTIVE\u2019\n    <choose>\n        <when test="title != null">\n        AND title like #{title}\n        </when>\n        <when test="author != null and author.name != null">\n            AND author_name like #{author.name}\n        </when>\n        <otherwise>\n            AND featured = 1\n        </otherwise>\n    </choose>\n</select>\n')),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},"set")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<update id="updateAuthorIfNecessary">\nupdate Author\n    <set>\n        <if test="username != null">username=#{username},</if>\n        <if test="password != null">password=#{password},</if>\n        <if test="email != null">email=#{email},</if>\n        <if test="bio != null">bio=#{bio}</if>\n    </set>\nwhere id=#{id}\n</update>\n')),(0,r.kt)("ol",{start:4},(0,r.kt)("li",{parentName:"ol"},"for...each")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<select id="getListByIds" parameterType="java.util.List" resultMap="userResultMap">\n    SELECT id, name, age, gender\n      FROM t_user\n      WHERE status = 0 AND id IN\n     <foreach collection="list" index="index" item="item" open="(" separator="," close=")">\n        #{item}\n     </foreach>\n</select>\n')),(0,r.kt)("p",null,"\u5f53\u4f7f\u7528\u53ef\u8fed\u4ee3\u5bf9\u8c61\u6216\u8005\u6570\u7ec4\u65f6\uff0cindex \u662f\u5f53\u524d\u8fed\u4ee3\u7684\u6b21\u6570\uff0citem \u7684\u503c\u662f\u672c\u6b21\u8fed\u4ee3\u83b7\u53d6\u7684\u5143\u7d20\u3002\u5f53\u4f7f\u7528 Map \u5bf9\u8c61\uff08\u6216\u8005 Map.Entry \u5bf9\u8c61\u7684\u96c6\u5408\uff09\u65f6\uff0cindex \u662f\u952e\uff0citem \u662f\u503c\u3002"),(0,r.kt)("h3",{id:"cdata"},"CDATA"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},'<![CDATA[\xa0\xa0\xa0]]> \u662f\u4ec0\u4e48\uff0c\u8fd9\u662fXML\u8bed\u6cd5\u3002\u5728CDATA\u5185\u90e8\u7684\u6240\u6709\u5185\u5bb9\u90fd\u4f1a\u88ab\u89e3\u6790\u5668\u5ffd\u7565\u3002\n\n\u5982\u679c\u6587\u672c\u5305\u542b\u4e86\u5f88\u591a\u7684"<"\u5b57\u7b26 <=\u548c"&"\u5b57\u7b26\u2014\u2014\u5c31\u8c61\u7a0b\u5e8f\u4ee3\u7801\u4e00\u6837\uff0c\u90a3\u4e48\u6700\u597d\u628a\u4ed6\u4eec\u90fd\u653e\u5230CDATA\u90e8\u4ef6\u4e2d\u3002\u4f46\u662f\u6ce8\u610f\u4e0d\u8981\u628a\u6807\u7b7e<if>\u3001<where> ...\xa0\u7b49\u6807\u7b7e\u653e\u5728CDATA\u91cc\u9762\uff0c\u5426\u5219\u8fd9\u4e9b\u4e5f\u4e0d\u4f1a\u88ab\u89e3\u6790\n\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="UTF-8" ?>\n<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">\n<mapper namespace="com.stephen.ssm.model.User">\n    <resultMap type="User" id="userMap">\n        <id property="id" column="id"/>\n        <result property="name" column="name"/>\n        <result property="age" column="age"/>\n    </resultMap>\n    \n    <sql id="pagination">\n        <if test="offset != null and rowCount!= null">\n            <![CDATA[\n                LIMIT #{offset},#{rowCount}\n            ]]>\n        </if>\n    </sql>\n    \n    <select id="find" resultMap="userMap" parameterType="map">\n        <![CDATA[\n            SELECT * FROM users WHERE 1 = 1\n        ]]>\n        <if test="name != null">\n            <![CDATA[\n                AND name LIKE CONCAT(\'%\', #{name}, \'%\')\n            ]]>\n        </if>\n        <![CDATA[\n            ORDER BY id ASC\n        ]]>\n        <include refid="pagination" />\n    </select>\n    \n    <select id="getCount" resultType="Integer" parameterType="map">\n        <![CDATA[\n            SELECT COUNT(id) FROM users WHERE 1 = 1\n        ]]>\n        <if test="name != null">\n            <![CDATA[\n                AND name LIKE CONCAT(\'%\', #{name}, \'%\')\n            ]]>\n        </if>\n    </select>\n</mapper>\n')),(0,r.kt)("hr",null),(0,r.kt)("p",null,"\u53c2\u8003\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://baomidou.com/"},"MyBatisPlus\u5b98\u65b9\u6587\u6863\uff1ahttps://baomidou.com/")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://mybatis.org/mybatis-3/zh/sqlmap-xml.html"},"Mybatis\u5b98\u65b9\u6587\u6863\uff1ahttps://mybatis.org/mybatis-3/zh/sqlmap-xml.html"))))}d.isMDXComponent=!0}}]);
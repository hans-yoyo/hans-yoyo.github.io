"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[9397],{3905:(I,n,N)=>{N.d(n,{Zo:()=>O,kt:()=>i});var T=N(7294);function A(I,n,N){return n in I?Object.defineProperty(I,n,{value:N,enumerable:!0,configurable:!0,writable:!0}):I[n]=N,I}function e(I,n){var N=Object.keys(I);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(I);n&&(T=T.filter((function(n){return Object.getOwnPropertyDescriptor(I,n).enumerable}))),N.push.apply(N,T)}return N}function t(I){for(var n=1;n<arguments.length;n++){var N=null!=arguments[n]?arguments[n]:{};n%2?e(Object(N),!0).forEach((function(n){A(I,n,N[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(I,Object.getOwnPropertyDescriptors(N)):e(Object(N)).forEach((function(n){Object.defineProperty(I,n,Object.getOwnPropertyDescriptor(N,n))}))}return I}function P(I,n){if(null==I)return{};var N,T,A=function(I,n){if(null==I)return{};var N,T,A={},e=Object.keys(I);for(T=0;T<e.length;T++)N=e[T],n.indexOf(N)>=0||(A[N]=I[N]);return A}(I,n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(I);for(T=0;T<e.length;T++)N=e[T],n.indexOf(N)>=0||Object.prototype.propertyIsEnumerable.call(I,N)&&(A[N]=I[N])}return A}var E=T.createContext({}),L=function(I){var n=T.useContext(E),N=n;return I&&(N="function"==typeof I?I(n):t(t({},n),I)),N},O=function(I){var n=L(I.components);return T.createElement(E.Provider,{value:n},I.children)},a={inlineCode:"code",wrapper:function(I){var n=I.children;return T.createElement(T.Fragment,{},n)}},S=T.forwardRef((function(I,n){var N=I.components,A=I.mdxType,e=I.originalType,E=I.parentName,O=P(I,["components","mdxType","originalType","parentName"]),S=L(N),i=A,U=S["".concat(E,".").concat(i)]||S[i]||a[i]||e;return N?T.createElement(U,t(t({ref:n},O),{},{components:N})):T.createElement(U,t({ref:n},O))}));function i(I,n){var N=arguments,A=n&&n.mdxType;if("string"==typeof I||A){var e=N.length,t=new Array(e);t[0]=S;var P={};for(var E in n)hasOwnProperty.call(n,E)&&(P[E]=n[E]);P.originalType=I,P.mdxType="string"==typeof I?I:A,t[1]=P;for(var L=2;L<e;L++)t[L]=N[L];return T.createElement.apply(null,t)}return T.createElement.apply(null,N)}S.displayName="MDXCreateElement"},9550:(I,n,N)=>{N.r(n),N.d(n,{assets:()=>E,contentTitle:()=>t,default:()=>a,frontMatter:()=>e,metadata:()=>P,toc:()=>L});var T=N(7462),A=(N(7294),N(3905));const e={},t=void 0,P={unversionedId:"mysql/MySQL\u5206\u533a\u8868",id:"mysql/MySQL\u5206\u533a\u8868",title:"MySQL\u5206\u533a\u8868",description:"\u5206\u533a\u662f\u4e00\u79cd\u8868\u7684\u8bbe\u8ba1\u6a21\u5f0f\uff0c\u901a\u4fd7\u5730\u8bb2\u8868\u5206\u533a\u662f\u5c06\u4e00\u5927\u8868\uff0c\u6839\u636e\u6761\u4ef6\u5206\u5272\u6210\u82e5\u5e72\u4e2a\u5c0f\u8868\u3002\u4f46\u662f\u5bf9\u4e8e\u5e94\u7528\u7a0b\u5e8f\u6765\u8bb2\uff0c\u5206\u533a\u7684\u8868\u548c\u6ca1\u6709\u5206\u533a\u7684\u8868\u662f\u4e00\u6837\u7684\u3002\u6362\u53e5\u8bdd\u6765\u8bb2\uff0c\u5206\u533a\u5bf9\u4e8e\u5e94\u7528\u662f\u900f\u660e\u7684\uff0c\u53ea\u662f\u6570\u636e\u5e93\u5bf9\u4e8e\u6570\u636e\u7684\u91cd\u65b0\u6574\u7406\u3002",source:"@site/wiki/database/mysql/MySQL\u5206\u533a\u8868.md",sourceDirName:"mysql",slug:"/mysql/MySQL\u5206\u533a\u8868",permalink:"/wiki/database/mysql/MySQL\u5206\u533a\u8868",draft:!1,tags:[],version:"current",lastUpdatedBy:"hyman213",lastUpdatedAt:1677503089,formattedLastUpdatedAt:"2023\u5e742\u670827\u65e5",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"index",permalink:"/wiki/database/elasticSearch/"},next:{title:"MySQL\u5b57\u6bb5\u7c7b\u578b",permalink:"/wiki/database/mysql/MySQL\u5b57\u6bb5\u7c7b\u578b"}},E={},L=[{value:"\u5206\u533a\u7684\u76ee\u7684\u53ca\u5206\u533a\u7c7b\u578b",id:"\u5206\u533a\u7684\u76ee\u7684\u53ca\u5206\u533a\u7c7b\u578b",level:2},{value:"\u5206\u533a\u6ce8\u610f\u4e8b\u9879\u53ca\u9002\u7528\u573a\u666f",id:"\u5206\u533a\u6ce8\u610f\u4e8b\u9879\u53ca\u9002\u7528\u573a\u666f",level:2},{value:"\u5206\u533a\u8868\u4e3a\u4ec0\u4e48\u4e0d\u5e38\u7528",id:"\u5206\u533a\u8868\u4e3a\u4ec0\u4e48\u4e0d\u5e38\u7528",level:2},{value:"\u5206\u533a\u8868\u64cd\u4f5c",id:"\u5206\u533a\u8868\u64cd\u4f5c",level:2},{value:"\u521b\u5efa\u5206\u533a\u8868\u6ce8\u610f\u4e8b\u9879",id:"\u521b\u5efa\u5206\u533a\u8868\u6ce8\u610f\u4e8b\u9879",level:2},{value:"\u5efa\u8868\u6210\u529f\u7684\u793a\u4f8b",id:"\u5efa\u8868\u6210\u529f\u7684\u793a\u4f8b",level:3},{value:"\u6309\u6708\u5206\u533a",id:"\u6309\u6708\u5206\u533a",level:4},{value:"\u6309\u65e5\u5206\u533a",id:"\u6309\u65e5\u5206\u533a",level:4},{value:"\u9519\u8bef\u793a\u4f8b",id:"\u9519\u8bef\u793a\u4f8b",level:3},{value:"\u7406\u89e3\u5206\u533a\u952e\u4e0e <code>pk</code>\u3001<code>uk</code> \u7684\u5173\u7cfb",id:"\u7406\u89e3\u5206\u533a\u952e\u4e0e-pkuk-\u7684\u5173\u7cfb",level:2},{value:"\u53c2\u8003",id:"\u53c2\u8003",level:2}],O={toc:L};function a(I){let{components:n,...N}=I;return(0,A.kt)("wrapper",(0,T.Z)({},O,N,{components:n,mdxType:"MDXLayout"}),(0,A.kt)("p",null,"\u5206\u533a\u662f\u4e00\u79cd\u8868\u7684\u8bbe\u8ba1\u6a21\u5f0f\uff0c\u901a\u4fd7\u5730\u8bb2\u8868\u5206\u533a\u662f\u5c06\u4e00\u5927\u8868\uff0c\u6839\u636e\u6761\u4ef6\u5206\u5272\u6210\u82e5\u5e72\u4e2a\u5c0f\u8868\u3002\u4f46\u662f\u5bf9\u4e8e\u5e94\u7528\u7a0b\u5e8f\u6765\u8bb2\uff0c\u5206\u533a\u7684\u8868\u548c\u6ca1\u6709\u5206\u533a\u7684\u8868\u662f\u4e00\u6837\u7684\u3002\u6362\u53e5\u8bdd\u6765\u8bb2\uff0c\u5206\u533a\u5bf9\u4e8e\u5e94\u7528\u662f\u900f\u660e\u7684\uff0c\u53ea\u662f\u6570\u636e\u5e93\u5bf9\u4e8e\u6570\u636e\u7684\u91cd\u65b0\u6574\u7406\u3002"),(0,A.kt)("p",null,"MySQL 5.7 \u5206\u533a\u8868\u5b98\u65b9\u6587\u6863\u8bf4\u660e\uff1a",(0,A.kt)("a",{parentName:"p",href:"https://dev.mysql.com/doc/refman/5.7/en/partitioning-overview.html"},"https://dev.mysql.com/doc/refman/5.7/en/partitioning-overview.html")),(0,A.kt)("h2",{id:"\u5206\u533a\u7684\u76ee\u7684\u53ca\u5206\u533a\u7c7b\u578b"},"\u5206\u533a\u7684\u76ee\u7684\u53ca\u5206\u533a\u7c7b\u578b"),(0,A.kt)("p",null,"MySQL\u5728\u521b\u5efa\u8868\u7684\u65f6\u5019\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528",(0,A.kt)("inlineCode",{parentName:"p"},"PARTITION BY"),"\u5b50\u53e5\u5b9a\u4e49\u6bcf\u4e2a\u5206\u533a\u5b58\u653e\u7684\u6570\u636e\u3002\u5728\u6267\u884c\u67e5\u8be2\u7684\u65f6\u5019\uff0c\u4f18\u5316\u5668\u6839\u636e\u5206\u533a\u5b9a\u4e49\u8fc7\u6ee4\u90a3\u4e9b\u6ca1\u6709\u6211\u4eec\u9700\u8981\u7684\u6570\u636e\u7684\u5206\u533a\uff0c\u8fd9\u6837\u67e5\u8be2\u5c31\u53ef\u4ee5\u65e0\u9700\u626b\u63cf\u6240\u6709\u5206\u533a\uff0c\u53ea\u9700\u8981\u67e5\u627e\u5305\u542b\u9700\u8981\u6570\u636e\u7684\u5206\u533a\u5373\u53ef\u3002"),(0,A.kt)("p",null,"\u5206\u533a\u7684\u53e6\u4e00\u4e2a\u76ee\u7684\u662f\u5c06\u6570\u636e\u6309\u7167\u4e00\u4e2a\u8f83\u7c97\u7684\u7c92\u5ea6\u5206\u522b\u5b58\u653e\u5728\u4e0d\u540c\u7684\u8868\u4e2d\u3002\u8fd9\u6837\u505a\u53ef\u4ee5\u5c06\u76f8\u5173\u7684\u6570\u636e\u5b58\u653e\u5728\u4e00\u8d77\uff0c\u53e6\u5916\uff0c\u5f53\u6211\u4eec\u60f3\u8981\u4e00\u6b21\u6279\u91cf\u5220\u9664\u6574\u4e2a\u5206\u533a\u7684\u6570\u636e\u4e5f\u4f1a\u53d8\u5f97\u5f88\u65b9\u4fbf\u3002"),(0,A.kt)("p",null,"\u4e0b\u9762\u7b80\u5355\u4ecb\u7ecd\u4e0b\u56db\u79cd\u5e38\u89c1\u7684\u5206\u533a\u7c7b\u578b\uff1a"),(0,A.kt)("ul",null,(0,A.kt)("li",{parentName:"ul"},(0,A.kt)("strong",{parentName:"li"},"RANGE\u5206\u533a"),"\uff1a\u6700\u4e3a\u5e38\u7528\uff0c\u57fa\u4e8e\u5c5e\u4e8e\u4e00\u4e2a\u7ed9\u5b9a\u8fde\u7eed\u533a\u95f4\u7684\u5217\u503c\uff0c\u628a\u591a\u884c\u5206\u914d\u7ed9\u5206\u533a\u3002\u6700\u5e38\u89c1\u7684\u662f\u57fa\u4e8e\u65f6\u95f4\u5b57\u6bb5\u3002"),(0,A.kt)("li",{parentName:"ul"},(0,A.kt)("strong",{parentName:"li"},"LIST\u5206\u533a"),"\uff1aLIST\u5206\u533a\u548cRANGE\u5206\u533a\u7c7b\u4f3c\uff0c\u533a\u522b\u5728\u4e8eLIST\u662f\u679a\u4e3e\u503c\u5217\u8868\u7684\u96c6\u5408\uff0cRANGE\u662f\u8fde\u7eed\u7684\u533a\u95f4\u503c\u7684\u96c6\u5408\u3002"),(0,A.kt)("li",{parentName:"ul"},(0,A.kt)("strong",{parentName:"li"},"HASH\u5206\u533a"),"\uff1a\u57fa\u4e8e\u7528\u6237\u5b9a\u4e49\u7684\u8868\u8fbe\u5f0f\u7684\u8fd4\u56de\u503c\u6765\u8fdb\u884c\u9009\u62e9\u7684\u5206\u533a\uff0c\u8be5\u8868\u8fbe\u5f0f\u4f7f\u7528\u5c06\u8981\u63d2\u5165\u5230\u8868\u4e2d\u7684\u8fd9\u4e9b\u884c\u7684\u5217\u503c\u8fdb\u884c\u8ba1\u7b97\u3002\u8fd9\u4e2a\u51fd\u6570\u53ef\u4ee5\u5305\u542bMySQL\u4e2d\u6709\u6548\u7684\u3001\u4ea7\u751f\u975e\u8d1f\u6574\u6570\u503c\u7684\u4efb\u4f55\u8868\u8fbe\u5f0f\u3002"),(0,A.kt)("li",{parentName:"ul"},(0,A.kt)("strong",{parentName:"li"},"KEY\u5206\u533a"),"\uff1a\u7c7b\u4f3c\u4e8e\u6309HASH\u5206\u533a\uff0c\u533a\u522b\u5728\u4e8eKEY\u5206\u533a\u53ea\u652f\u6301\u8ba1\u7b97\u4e00\u5217\u6216\u591a\u5217\uff0c\u4e14MySQL\u670d\u52a1\u5668\u63d0\u4f9b\u5176\u81ea\u8eab\u7684\u54c8\u5e0c\u51fd\u6570\u3002\u5fc5\u987b\u6709\u4e00\u5217\u6216\u591a\u5217\u5305\u542b\u6574\u6570\u503c\u3002")),(0,A.kt)("p",null,"\u4e0a\u8ff0\u56db\u79cd\u5206\u533a\u7c7b\u578b\u4e2d\uff0c",(0,A.kt)("inlineCode",{parentName:"p"},"RANGE\u5206\u533a"),"\u5373\u8303\u56f4\u5206\u533a\u662f\u6700\u5e38\u7528\u7684\u3002RANGE\u5206\u533a\u7684\u7279\u70b9\u662f\u591a\u4e2a\u5206\u533a\u7684\u8303\u56f4\u8981\u8fde\u7eed\uff0c\u4f46\u662f\u4e0d\u80fd\u91cd\u53e0\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4f7f\u7528VALUES LESS THAN\u5c5e\u6027\uff0c\u5373\u6bcf\u4e2a\u5206\u533a\u4e0d\u5305\u62ec\u6307\u5b9a\u7684\u90a3\u4e2a\u503c\u3002"),(0,A.kt)("pre",null,(0,A.kt)("code",{parentName:"pre",className:"language-SQL"},"-- RANGE \u5206\u533a\nCREATE TABLE employees (\n    id INT NOT NULL,\n    fname VARCHAR(30),\n    lname VARCHAR(30),\n    hired DATE NOT NULL DEFAULT '1970-01-01',\n    separated DATE NOT NULL DEFAULT '9999-12-31',\n    job_code INT NOT NULL,\n    store_id INT NOT NULL\n)\nPARTITION BY RANGE (store_id) (\n    PARTITION p0 VALUES LESS THAN (6),\n    PARTITION p1 VALUES LESS THAN (11),\n    PARTITION p2 VALUES LESS THAN (16),\n    PARTITION p3 VALUES LESS THAN MAXVALUE\n);\n\n-- \u6309\u5e74\u5206\u533a\nCREATE TABLE employees (\n    id INT NOT NULL,\n    fname VARCHAR(30),\n    lname VARCHAR(30),\n    hired DATE NOT NULL DEFAULT '1970-01-01',\n    separated DATE NOT NULL DEFAULT '9999-12-31',\n    job_code INT,\n    store_id INT\n)\nPARTITION BY RANGE ( YEAR(separated) ) (\n    PARTITION p0 VALUES LESS THAN (1991),\n    PARTITION p1 VALUES LESS THAN (1996),\n    PARTITION p2 VALUES LESS THAN (2001),\n    PARTITION p3 VALUES LESS THAN MAXVALUE\n);\n\n-- \u6309\u8ba1\u7b97\u7684\u65f6\u95f4\u70b9\u5206\u533a\nCREATE TABLE quarterly_report_status (\n    report_id INT NOT NULL,\n    report_status VARCHAR(20) NOT NULL,\n    report_updated TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP\n)\nPARTITION BY RANGE ( UNIX_TIMESTAMP(report_updated) ) (\n    PARTITION p0 VALUES LESS THAN ( UNIX_TIMESTAMP('2008-01-01 00:00:00') ),\n    PARTITION p1 VALUES LESS THAN ( UNIX_TIMESTAMP('2008-04-01 00:00:00') ),\n    PARTITION p2 VALUES LESS THAN ( UNIX_TIMESTAMP('2008-07-01 00:00:00') ),\n    PARTITION p3 VALUES LESS THAN ( UNIX_TIMESTAMP('2008-10-01 00:00:00') ),\n    PARTITION p4 VALUES LESS THAN ( UNIX_TIMESTAMP('2009-01-01 00:00:00') ),\n    PARTITION p5 VALUES LESS THAN ( UNIX_TIMESTAMP('2009-04-01 00:00:00') ),\n    PARTITION p6 VALUES LESS THAN ( UNIX_TIMESTAMP('2009-07-01 00:00:00') ),\n    PARTITION p7 VALUES LESS THAN ( UNIX_TIMESTAMP('2009-10-01 00:00:00') ),\n    PARTITION p8 VALUES LESS THAN ( UNIX_TIMESTAMP('2010-01-01 00:00:00') ),\n    PARTITION p9 VALUES LESS THAN (MAXVALUE)\n);\n")),(0,A.kt)("h2",{id:"\u5206\u533a\u6ce8\u610f\u4e8b\u9879\u53ca\u9002\u7528\u573a\u666f"},"\u5206\u533a\u6ce8\u610f\u4e8b\u9879\u53ca\u9002\u7528\u573a\u666f"),(0,A.kt)("p",null,"\u5176\u5b9e\u5206\u533a\u8868\u7684\u4f7f\u7528\u6709\u5f88\u591a\u9650\u5236\u548c\u9700\u8981\u6ce8\u610f\u7684\u4e8b\u9879\uff0c\u53c2\u8003\u5b98\u65b9\u6587\u6863\uff0c\u7b80\u8981\u603b\u7ed3\u51e0\u70b9\u5982\u4e0b\uff1a"),(0,A.kt)("ul",null,(0,A.kt)("li",{parentName:"ul"},"\u5206\u533a\u5b57\u6bb5\u5fc5\u987b\u662f\u6574\u6570\u7c7b\u578b\u6216\u89e3\u6790\u4e3a\u6574\u6570\u7684\u8868\u8fbe\u5f0f\u3002"),(0,A.kt)("li",{parentName:"ul"},"\u5206\u533a\u5b57\u6bb5\u5efa\u8bae\u8bbe\u7f6e\u4e3aNOT NULL\uff0c\u82e5\u67d0\u884c\u6570\u636e\u5206\u533a\u5b57\u6bb5\u4e3anull\uff0c\u5728RANGE\u5206\u533a\u4e2d\uff0c\u8be5\u884c\u6570\u636e\u4f1a\u5212\u5206\u5230\u6700\u5c0f\u7684\u5206\u533a\u91cc\u3002"),(0,A.kt)("li",{parentName:"ul"},"MySQL\u5206\u533a\u4e2d\u5982\u679c\u5b58\u5728\u4e3b\u952e\u6216\u552f\u4e00\u952e\uff0c\u5219\u5206\u533a\u5217\u5fc5\u987b\u5305\u542b\u5728\u5176\u4e2d\u3002"),(0,A.kt)("li",{parentName:"ul"},"Innodb\u5206\u533a\u8868\u4e0d\u652f\u6301\u5916\u952e\u3002"),(0,A.kt)("li",{parentName:"ul"},"\u66f4\u6539sql_mode\u6a21\u5f0f\u53ef\u80fd\u5f71\u54cd\u5206\u533a\u8868\u7684\u8868\u73b0\u3002"),(0,A.kt)("li",{parentName:"ul"},"\u5206\u533a\u8868\u4e0d\u5f71\u54cd\u81ea\u589e\u5217\u3002")),(0,A.kt)("p",null,"\u4ece\u4e0a\u9762\u7684\u4ecb\u7ecd\u4e2d\u53ef\u4ee5\u770b\u51fa\uff0c\u5206\u533a\u8868\u9002\u7528\u4e8e\u4e00\u4e9b\u65e5\u5fd7\u8bb0\u5f55\u8868\u3002\u8fd9\u7c7b\u8868\u7684\u7279\u70b9\u662f\u6570\u636e\u91cf\u5927\u3001\u5e76\u4e14\u6709\u51b7\u70ed\u6570\u636e\u533a\u5206\uff0c\u53ef\u4ee5\u6309\u7167\u65f6\u95f4\u7ef4\u5ea6\u6765\u8fdb\u884c\u6570\u636e\u5f52\u6863\u3002\u8fd9\u7c7b\u8868\u662f\u6bd4\u8f83\u9002\u5408\u4f7f\u7528\u5206\u533a\u8868\u7684\uff0c\u56e0\u4e3a\u5206\u533a\u8868\u53ef\u4ee5\u5bf9\u5355\u72ec\u7684\u5206\u533a\u8fdb\u884c\u7ef4\u62a4\uff0c\u5bf9\u4e8e\u6570\u636e\u5f52\u6863\u66f4\u65b9\u4fbf\u3002"),(0,A.kt)("h2",{id:"\u5206\u533a\u8868\u4e3a\u4ec0\u4e48\u4e0d\u5e38\u7528"},"\u5206\u533a\u8868\u4e3a\u4ec0\u4e48\u4e0d\u5e38\u7528"),(0,A.kt)("p",null,"\u5728\u6211\u4eec\u9879\u76ee\u5f00\u53d1\u4e2d\uff0c\u5206\u533a\u8868\u5176\u5b9e\u662f\u5f88\u5c11\u7528\u7684\uff0c\u4e0b\u9762\u7b80\u5355\u8bf4\u660e\u4e0b\u51e0\u70b9\u539f\u56e0\uff1a"),(0,A.kt)("ul",null,(0,A.kt)("li",{parentName:"ul"},"\u5206\u533a\u5b57\u6bb5\u7684\u9009\u62e9\u6709\u9650\u5236\u3002"),(0,A.kt)("li",{parentName:"ul"},"\u82e5\u67e5\u8be2\u4e0d\u8d70\u5206\u533a\u952e\uff0c\u5219\u53ef\u80fd\u4f1a\u626b\u63cf\u6240\u6709\u5206\u533a\uff0c\u6548\u7387\u4e0d\u4f1a\u63d0\u5347\u3002"),(0,A.kt)("li",{parentName:"ul"},"\u82e5\u6570\u636e\u5206\u5e03\u4e0d\u5747\uff0c\u5206\u533a\u5927\u5c0f\u5dee\u522b\u8f83\u5927\uff0c\u53ef\u80fd\u6027\u80fd\u63d0\u5347\u4e5f\u6709\u9650\u3002"),(0,A.kt)("li",{parentName:"ul"},"\u666e\u901a\u8868\u6539\u9020\u6210\u5206\u533a\u8868\u6bd4\u8f83\u7e41\u7410\u3002"),(0,A.kt)("li",{parentName:"ul"},"\u9700\u8981\u6301\u7eed\u5bf9\u5206\u533a\u8fdb\u884c\u7ef4\u62a4\uff0c\u6bd4\u5982\u5230\u4e866\u6708\u4efd\u524d\u5c31\u8981\u65b0\u589e6\u6708\u4efd\u7684\u5206\u533a\u3002"),(0,A.kt)("li",{parentName:"ul"},"\u589e\u52a0\u5b66\u4e60\u6210\u672c\uff0c\u5b58\u5728\u672a\u77e5\u98ce\u9669\u3002")),(0,A.kt)("h2",{id:"\u5206\u533a\u8868\u64cd\u4f5c"},"\u5206\u533a\u8868\u64cd\u4f5c"),(0,A.kt)("pre",null,(0,A.kt)("code",{parentName:"pre",className:"language-SQL"},"-- \u67e5\u8be2\u5206\u533a\u6570\u636e\nSELECT * FROM tr PARTITION (p2);\n\n-- \u6e05\u7a7a\u67d0\u4e2a\u5206\u533a\u7684\u6570\u636e\nalter table tr truncate partition p0;\n\n-- \u5220\u9664\u5206\u533a\nALTER TABLE stat DROP PARTITION p190214, p190215\n\n-- \u5bf9\u67d0\u4e2a\u5206\u533a\u91cd\u65b0\u5206\u914d: REORGANIZE\nALTER TABLE stat\n    REORGANIZE PARTITION pm INTO (\n        PARTITION p190215 VALUES LESS THAN(TO_DAYS('2019-02-15')),\n        PARTITION pm VALUES LESS THAN(MAXVALUE)\n    );\n\n-- \u67e5\u770b\u5206\u533a\u6570\u636e\u60c5\u51b5\nSELECT TABLE_NAME, PARTITION_NAME,TABLE_ROWS FROM INFORMATION_SCHEMA.PARTITIONS WHERE TABLE_NAME = 'sale_data';\n\n\n-- \u5c06\u8868\u6539\u4e3a\u5206\u533a\u8868\nALTER TABLE stat\n    PARTITION BY RANGE(TO_DAYS(dt)) (\n        PARTITION p0 VALUES LESS THAN(0),\n        PARTITION p190214 VALUES LESS THAN(TO_DAYS('2019-02-14')),\n        PARTITION pm VALUES LESS THAN(MAXVALUE)\n    );\n\n\n-- \u4ece\u6beb\u79d2\u503c\u83b7\u53d6month\nSELECT MONTH(FROM_UNIXTIME(create_time DIV 1000))\n\n\n-- \u793a\u4f8b\n\nmysql> create table table_to_partition (\n  my_timestamp int unsigned primary key\n) partition by hash(my_timestamp DIV (60*60*24)) partitions 3;\n\nmysql> insert into table_to_partition values (unix_timestamp(now()));\nmysql> insert into table_to_partition values (unix_timestamp(now()-interval 1 day));\nmysql> insert into table_to_partition values (unix_timestamp(now()-interval 2 day));\nmysql> insert into table_to_partition values (unix_timestamp(now()-interval 3 day));\nmysql> insert into table_to_partition values (unix_timestamp(now()-interval 4 day));\nmysql> insert into table_to_partition values (unix_timestamp(now()-interval 5 day));\n\nmysql> select table_name, partition_name, table_rows \nfrom information_schema.partitions where table_name='table_to_partition';\n\n+--------------------+----------------+------------+\n| table_name         | partition_name | table_rows |\n+--------------------+----------------+------------+\n| table_to_partition | p0             |          2 |\n| table_to_partition | p1             |          2 |\n| table_to_partition | p2             |          2 |\n+--------------------+----------------+------------+\n\n")),(0,A.kt)("pre",null,(0,A.kt)("code",{parentName:"pre",className:"language-SQL"},"\n-- RANGE\u5206\u533a\uff08\u5e38\u7528\uff09\ncreate table employees (\n    id int not null,\n    fname varchar(30),\n    lname varchar(30),\n    hired date not null default '1970-01-01',\n    separated date not null default '9999-12-31',\n    job_code int not null,\n    store_id int not null\n) partition by range (store_id) (\n    partition p0 values less than (6),\n    partition p1 values less than (11),\n    partition p2 values less than (16),\n    partition p3 values less than (21)\uff0c\n    partition p3 values less than maxvalue\n);\n\n\n-- LIST\u5206\u533a\ncreate table employees (\n    id int not null,\n    fname varchar(30),\n    lname varchar(30),\n    hired date not null default '1970-01-01',\n    separated date not null default '9999-12-31',\n    job_code int not null,\n    store_id int not null\n) partition by list(store_id)\n    partition pNorth values in (3,5,6,9,17),\n    partition pEast values in (1,2,10,11,19,20),\n    partition pWest values in (4,12,13,14,18),\n    partition pCentral values in (7,8,15,16)\n)\uff1b\n\n\n-- HASH \u5206\u533a\ncreate table employees (\n    id int not null,\n    fname varchar(30),\n    lname varchar(30),\n    hired date not null default '1970-01-01',\n    separated date not null default '9999-12-31',\n    job_code int not null,\n    store_id int not null\n) partition by hash(store_id)\npartitions 4\uff1b\n\n\n")),(0,A.kt)("h2",{id:"\u521b\u5efa\u5206\u533a\u8868\u6ce8\u610f\u4e8b\u9879"},"\u521b\u5efa\u5206\u533a\u8868\u6ce8\u610f\u4e8b\u9879"),(0,A.kt)("h3",{id:"\u5efa\u8868\u6210\u529f\u7684\u793a\u4f8b"},"\u5efa\u8868\u6210\u529f\u7684\u793a\u4f8b"),(0,A.kt)("p",null,"\u8fd9\u91cc\u662f\u901a\u8fc7\u65b0\u589e\u4e86\u4e00\u4e2a ",(0,A.kt)("inlineCode",{parentName:"p"},"datetime")," \u7c7b\u578b\u7684\u5b57\u6bb5 ",(0,A.kt)("inlineCode",{parentName:"p"},"occur_time"),"\uff0c\u56e0\u4e3a\u6ca1\u6709\u627e\u5230\u80fd\u591f\u5408\u9002\u7684\u65b9\u6848\u4ece\u65f6\u95f4\u6233\u6beb\u79d2\u503c\u83b7\u53d6\u65f6\u95f4\u7684MONTH\u503c"),(0,A.kt)("h4",{id:"\u6309\u6708\u5206\u533a"},"\u6309\u6708\u5206\u533a"),(0,A.kt)("pre",null,(0,A.kt)("code",{parentName:"pre",className:"language-SQL"},"\ndrop table IF EXISTS t_printer_online_record_partition;\n\nCREATE TABLE `t_printer_online_record_partition`  (\n    `id` bigint UNSIGNED NOT NULL COMMENT '\u4e3b\u952eID',\n    `printer_sn` varchar(64) NOT NULL COMMENT '\u6253\u5370\u673aSN',\n    `online` bit NOT NULL COMMENT '\u662f\u5426\u5728\u7ebf,1/\u5728\u7ebf,0/\u79bb\u7ebf',\n    `occur_time` datetime COMMENT '\u53d1\u751f\u65f6\u95f4',\n    `create_time` bigint UNSIGNED NOT NULL COMMENT '\u521b\u5efa\u65f6\u95f4',\n    `create_by` varchar(64) NULL COMMENT '\u521b\u5efa\u4eba',\n    `update_time` bigint UNSIGNED NULL COMMENT '\u66f4\u65b0\u65f6\u95f4',\n    `update_by` varchar(64) NULL COMMENT '\u66f4\u65b0\u4eba',\n    `update_version` int UNSIGNED NOT NULL DEFAULT 0 COMMENT '\u4e50\u89c2\u9501',\n    PRIMARY KEY (`id`, `occur_time`),\n    INDEX `idx_printer_sn_create_time`(`printer_sn`, `create_time`) USING BTREE COMMENT '\u6253\u5370\u673aSN'\n) ENGINE = InnoDB CHARACTER SET = utf8mb4 COMMENT = '\u6253\u5370\u673a\u4e0a\u4e0b\u7ebf\u8bb0\u5f55\u5206\u533a\u8868'\nPARTITION BY LIST(\n100+MONTH(occur_time)\n)(\nPARTITION p01 VALUES IN(101),\nPARTITION p02 VALUES IN(102),\nPARTITION p03 VALUES IN(103),\nPARTITION p04 VALUES IN(104),\nPARTITION p05 VALUES IN(105),\nPARTITION p06 VALUES IN(106),\nPARTITION p07 VALUES IN(107),\nPARTITION p08 VALUES IN(108),\nPARTITION p09 VALUES IN(109),\nPARTITION p10 VALUES IN(110),\nPARTITION p11 VALUES IN(111),\nPARTITION p12 VALUES IN(112)\n);\n\nINSERT INTO t_printer_online_record_partition VALUES(1, 'SN', true, NOW(), NOW(), NULL, NOW(), NULL, 0);\n\nCREATE TABLE `t_device_online_record_partition`  (\n    `id` bigint UNSIGNED NOT NULL COMMENT '\u4e3b\u952eID',\n    `device_id` varchar(64) NOT NULL COMMENT '\u8bbe\u5907ID',\n    `online` bit NOT NULL COMMENT '\u662f\u5426\u5728\u7ebf,1/\u5728\u7ebf,0/\u79bb\u7ebf',\n    `occur_time` datetime NOT NULL COMMENT '\u53d1\u751f\u65f6\u95f4',\n    `create_time` bigint UNSIGNED NOT NULL COMMENT '\u521b\u5efa\u65f6\u95f4',\n    `create_by` varchar(64) NULL COMMENT '\u521b\u5efa\u4eba',\n    `update_time` bigint UNSIGNED NULL COMMENT '\u66f4\u65b0\u65f6\u95f4',\n    `update_by` varchar(64) NULL COMMENT '\u66f4\u65b0\u4eba',\n    `update_version` int UNSIGNED NOT NULL DEFAULT 0 COMMENT '\u4e50\u89c2\u9501',\n    PRIMARY KEY (`id`, `occur_time`),\n    INDEX `idx_device_id_create_time`(`device_id`, `create_time`) USING BTREE\n) ENGINE = InnoDB CHARACTER SET = utf8mb4 COMMENT = '\u8bbe\u5907\u4e0a\u4e0b\u7ebf\u8bb0\u5f55\u5206\u533a\u8868'\nPARTITION BY LIST(\nMONTH(occur_time)\n)(\nPARTITION p01 VALUES IN(1),\nPARTITION p02 VALUES IN(2),\nPARTITION p03 VALUES IN(3),\nPARTITION p04 VALUES IN(4),\nPARTITION p05 VALUES IN(5),\nPARTITION p06 VALUES IN(6),\nPARTITION p07 VALUES IN(7),\nPARTITION p08 VALUES IN(8),\nPARTITION p09 VALUES IN(9),\nPARTITION p10 VALUES IN(10),\nPARTITION p11 VALUES IN(11),\nPARTITION p12 VALUES IN(12)\n);\n\nINSERT INTO t_device_online_record_partition VALUES (2, 'ZYUSH_JSIJSB', 0, NOW(), REPLACE(unix_timestamp(current_timestamp(3)),'.',''), NULL, REPLACE(unix_timestamp(current_timestamp(3)),'.',''), NULL, 0);\n\nSELECT * FROM t_device_online_record_partition PARTITION(p06);\n\n")),(0,A.kt)("p",null,"\u5728\u8868\u4e2d\u989d\u5916\u7ef4\u62a4\u4e00\u4e2a MONTH \u7684\u5b57\u6bb5\n\u4f7f\u7528RANGE\uff0c\u9700\u8981\u989d\u5916\u7ef4\u62a4\u4e00\u4e2aDATETIME\u5b57\u6bb5"),(0,A.kt)("h4",{id:"\u6309\u65e5\u5206\u533a"},"\u6309\u65e5\u5206\u533a"),(0,A.kt)("pre",null,(0,A.kt)("code",{parentName:"pre",className:"language-SQL"},"\nCREATE TABLE `adplatform_deduct_log_bak` (\n\xa0\xa0`id` int(11) NOT NULL AUTO_INCREMENT,\n\xa0\xa0`userId` INT(11) NOT NULL DEFAULT 0,\n\xa0\xa0`originalbanlance` varchar(1000) NOT NULL DEFAULT 0,\n\xa0\xa0`deductmoney` varchar(1000) NOT NULL DEFAULT 0,\n\xa0\xa0`chargetime` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',\n\xa0\xa0`detailinfo` varchar(10000) DEFAULT '' COMMENT 'hisId_money',\n\xa0\xa0PRIMARY KEY (`id`,`chargetime`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8\nPARTITION BY list ( 1*10000+MONTH(chargetime)*100+ DAY(chargetime))(\nPARTITION P01_01 VALUES IN (10101),\nPARTITION P01_02 VALUES IN (10102),\nPARTITION P01_03 VALUES IN (10103),\nPARTITION P01_04 VALUES IN (10104),\nPARTITION P01_05 VALUES IN (10105),\nPARTITION P01_06 VALUES IN (10106),\nPARTITION P01_07 VALUES IN (10107),\nPARTITION P01_08 VALUES IN (10108),\nPARTITION P01_09 VALUES IN (10109),\nPARTITION P01_10 VALUES IN (10110),\nPARTITION P01_11 VALUES IN (10111),\nPARTITION P01_12 VALUES IN (10112),\nPARTITION P01_13 VALUES IN (10113),\nPARTITION P01_14 VALUES IN (10114),\nPARTITION P01_15 VALUES IN (10115),\nPARTITION P01_16 VALUES IN (10116),\nPARTITION P01_17 VALUES IN (10117),\nPARTITION P01_18 VALUES IN (10118),\nPARTITION P01_19 VALUES IN (10119),\nPARTITION P01_20 VALUES IN (10120),\nPARTITION P01_21 VALUES IN (10121),\nPARTITION P01_22 VALUES IN (10122),\nPARTITION P01_23 VALUES IN (10123),\nPARTITION P01_24 VALUES IN (10124),\nPARTITION P01_25 VALUES IN (10125),\nPARTITION P01_26 VALUES IN (10126),\nPARTITION P01_27 VALUES IN (10127),\nPARTITION P01_28 VALUES IN (10128),\nPARTITION P01_29 VALUES IN (10129),\nPARTITION P01_30 VALUES IN (10130),\nPARTITION P01_31 VALUES IN (10131),\nPARTITION P02_01 VALUES IN (10201),\nPARTITION P02_02 VALUES IN (10202),\nPARTITION P02_03 VALUES IN (10203),\nPARTITION P02_04 VALUES IN (10204),\nPARTITION P02_05 VALUES IN (10205),\nPARTITION P02_06 VALUES IN (10206),\nPARTITION P02_07 VALUES IN (10207),\nPARTITION P02_08 VALUES IN (10208),\nPARTITION P02_09 VALUES IN (10209),\nPARTITION P02_10 VALUES IN (10210),\nPARTITION P02_11 VALUES IN (10211),\nPARTITION P02_12 VALUES IN (10212),\nPARTITION P02_13 VALUES IN (10213),\nPARTITION P02_14 VALUES IN (10214),\nPARTITION P02_15 VALUES IN (10215),\nPARTITION P02_16 VALUES IN (10216),\nPARTITION P02_17 VALUES IN (10217),\nPARTITION P02_18 VALUES IN (10218),\nPARTITION P02_19 VALUES IN (10219),\nPARTITION P02_20 VALUES IN (10220),\nPARTITION P02_21 VALUES IN (10221),\nPARTITION P02_22 VALUES IN (10222),\nPARTITION P02_23 VALUES IN (10223),\nPARTITION P02_24 VALUES IN (10224),\nPARTITION P02_25 VALUES IN (10225),\nPARTITION P02_26 VALUES IN (10226),\nPARTITION P02_27 VALUES IN (10227),\nPARTITION P02_28 VALUES IN (10228),\nPARTITION P02_29 VALUES IN (10229),\nPARTITION P03_01 VALUES IN (10301),\nPARTITION P03_02 VALUES IN (10302),\nPARTITION P03_03 VALUES IN (10303),\nPARTITION P03_04 VALUES IN (10304),\nPARTITION P03_05 VALUES IN (10305),\nPARTITION P03_06 VALUES IN (10306),\nPARTITION P03_07 VALUES IN (10307),\nPARTITION P03_08 VALUES IN (10308),\nPARTITION P03_09 VALUES IN (10309),\nPARTITION P03_10 VALUES IN (10310),\nPARTITION P03_11 VALUES IN (10311),\nPARTITION P03_12 VALUES IN (10312),\nPARTITION P03_13 VALUES IN (10313),\nPARTITION P03_14 VALUES IN (10314),\nPARTITION P03_15 VALUES IN (10315),\nPARTITION P03_16 VALUES IN (10316),\nPARTITION P03_17 VALUES IN (10317),\nPARTITION P03_18 VALUES IN (10318),\nPARTITION P03_19 VALUES IN (10319),\nPARTITION P03_20 VALUES IN (10320),\nPARTITION P03_21 VALUES IN (10321),\nPARTITION P03_22 VALUES IN (10322),\nPARTITION P03_23 VALUES IN (10323),\nPARTITION P03_24 VALUES IN (10324),\nPARTITION P03_25 VALUES IN (10325),\nPARTITION P03_26 VALUES IN (10326),\nPARTITION P03_27 VALUES IN (10327),\nPARTITION P03_28 VALUES IN (10328),\nPARTITION P03_29 VALUES IN (10329),\nPARTITION P03_30 VALUES IN (10330),\nPARTITION P03_31 VALUES IN (10331),\nPARTITION P04_01 VALUES IN (10401),\nPARTITION P04_02 VALUES IN (10402),\nPARTITION P04_03 VALUES IN (10403),\nPARTITION P04_04 VALUES IN (10404),\nPARTITION P04_05 VALUES IN (10405),\nPARTITION P04_06 VALUES IN (10406),\nPARTITION P04_07 VALUES IN (10407),\nPARTITION P04_08 VALUES IN (10408),\nPARTITION P04_09 VALUES IN (10409),\nPARTITION P04_10 VALUES IN (10410),\nPARTITION P04_11 VALUES IN (10411),\nPARTITION P04_12 VALUES IN (10412),\nPARTITION P04_13 VALUES IN (10413),\nPARTITION P04_14 VALUES IN (10414),\nPARTITION P04_15 VALUES IN (10415),\nPARTITION P04_16 VALUES IN (10416),\nPARTITION P04_17 VALUES IN (10417),\nPARTITION P04_18 VALUES IN (10418),\nPARTITION P04_19 VALUES IN (10419),\nPARTITION P04_20 VALUES IN (10420),\nPARTITION P04_21 VALUES IN (10421),\nPARTITION P04_22 VALUES IN (10422),\nPARTITION P04_23 VALUES IN (10423),\nPARTITION P04_24 VALUES IN (10424),\nPARTITION P04_25 VALUES IN (10425),\nPARTITION P04_26 VALUES IN (10426),\nPARTITION P04_27 VALUES IN (10427),\nPARTITION P04_28 VALUES IN (10428),\nPARTITION P04_29 VALUES IN (10429),\nPARTITION P04_30 VALUES IN (10430),\nPARTITION P05_01 VALUES IN (10501),\nPARTITION P05_02 VALUES IN (10502),\nPARTITION P05_03 VALUES IN (10503),\nPARTITION P05_04 VALUES IN (10504),\nPARTITION P05_05 VALUES IN (10505),\nPARTITION P05_06 VALUES IN (10506),\nPARTITION P05_07 VALUES IN (10507),\nPARTITION P05_08 VALUES IN (10508),\nPARTITION P05_09 VALUES IN (10509),\nPARTITION P05_10 VALUES IN (10510),\nPARTITION P05_11 VALUES IN (10511),\nPARTITION P05_12 VALUES IN (10512),\nPARTITION P05_13 VALUES IN (10513),\nPARTITION P05_14 VALUES IN (10514),\nPARTITION P05_15 VALUES IN (10515),\nPARTITION P05_16 VALUES IN (10516),\nPARTITION P05_17 VALUES IN (10517),\nPARTITION P05_18 VALUES IN (10518),\nPARTITION P05_19 VALUES IN (10519),\nPARTITION P05_20 VALUES IN (10520),\nPARTITION P05_21 VALUES IN (10521),\nPARTITION P05_22 VALUES IN (10522),\nPARTITION P05_23 VALUES IN (10523),\nPARTITION P05_24 VALUES IN (10524),\nPARTITION P05_25 VALUES IN (10525),\nPARTITION P05_26 VALUES IN (10526),\nPARTITION P05_27 VALUES IN (10527),\nPARTITION P05_28 VALUES IN (10528),\nPARTITION P05_29 VALUES IN (10529),\nPARTITION P05_30 VALUES IN (10530),\nPARTITION P05_31 VALUES IN (10531),\nPARTITION P06_01 VALUES IN (10601),\nPARTITION P06_02 VALUES IN (10602),\nPARTITION P06_03 VALUES IN (10603),\nPARTITION P06_04 VALUES IN (10604),\nPARTITION P06_05 VALUES IN (10605),\nPARTITION P06_06 VALUES IN (10606),\nPARTITION P06_07 VALUES IN (10607),\nPARTITION P06_08 VALUES IN (10608),\nPARTITION P06_09 VALUES IN (10609),\nPARTITION P06_10 VALUES IN (10610),\nPARTITION P06_11 VALUES IN (10611),\nPARTITION P06_12 VALUES IN (10612),\nPARTITION P06_13 VALUES IN (10613),\nPARTITION P06_14 VALUES IN (10614),\nPARTITION P06_15 VALUES IN (10615),\nPARTITION P06_16 VALUES IN (10616),\nPARTITION P06_17 VALUES IN (10617),\nPARTITION P06_18 VALUES IN (10618),\nPARTITION P06_19 VALUES IN (10619),\nPARTITION P06_20 VALUES IN (10620),\nPARTITION P06_21 VALUES IN (10621),\nPARTITION P06_22 VALUES IN (10622),\nPARTITION P06_23 VALUES IN (10623),\nPARTITION P06_24 VALUES IN (10624),\nPARTITION P06_25 VALUES IN (10625),\nPARTITION P06_26 VALUES IN (10626),\nPARTITION P06_27 VALUES IN (10627),\nPARTITION P06_28 VALUES IN (10628),\nPARTITION P06_29 VALUES IN (10629),\nPARTITION P06_30 VALUES IN (10630),\nPARTITION P07_01 VALUES IN (10701),\nPARTITION P07_02 VALUES IN (10702),\nPARTITION P07_03 VALUES IN (10703),\nPARTITION P07_04 VALUES IN (10704),\nPARTITION P07_05 VALUES IN (10705),\nPARTITION P07_06 VALUES IN (10706),\nPARTITION P07_07 VALUES IN (10707),\nPARTITION P07_08 VALUES IN (10708),\nPARTITION P07_09 VALUES IN (10709),\nPARTITION P07_10 VALUES IN (10710),\nPARTITION P07_11 VALUES IN (10711),\nPARTITION P07_12 VALUES IN (10712),\nPARTITION P07_13 VALUES IN (10713),\nPARTITION P07_14 VALUES IN (10714),\nPARTITION P07_15 VALUES IN (10715),\nPARTITION P07_16 VALUES IN (10716),\nPARTITION P07_17 VALUES IN (10717),\nPARTITION P07_18 VALUES IN (10718),\nPARTITION P07_19 VALUES IN (10719),\nPARTITION P07_20 VALUES IN (10720),\nPARTITION P07_21 VALUES IN (10721),\nPARTITION P07_22 VALUES IN (10722),\nPARTITION P07_23 VALUES IN (10723),\nPARTITION P07_24 VALUES IN (10724),\nPARTITION P07_25 VALUES IN (10725),\nPARTITION P07_26 VALUES IN (10726),\nPARTITION P07_27 VALUES IN (10727),\nPARTITION P07_28 VALUES IN (10728),\nPARTITION P07_29 VALUES IN (10729),\nPARTITION P07_30 VALUES IN (10730),\nPARTITION P07_31 VALUES IN (10731),\nPARTITION P08_01 VALUES IN (10801),\nPARTITION P08_02 VALUES IN (10802),\nPARTITION P08_03 VALUES IN (10803),\nPARTITION P08_04 VALUES IN (10804),\nPARTITION P08_05 VALUES IN (10805),\nPARTITION P08_06 VALUES IN (10806),\nPARTITION P08_07 VALUES IN (10807),\nPARTITION P08_08 VALUES IN (10808),\nPARTITION P08_09 VALUES IN (10809),\nPARTITION P08_10 VALUES IN (10810),\nPARTITION P08_11 VALUES IN (10811),\nPARTITION P08_12 VALUES IN (10812),\nPARTITION P08_13 VALUES IN (10813),\nPARTITION P08_14 VALUES IN (10814),\nPARTITION P08_15 VALUES IN (10815),\nPARTITION P08_16 VALUES IN (10816),\nPARTITION P08_17 VALUES IN (10817),\nPARTITION P08_18 VALUES IN (10818),\nPARTITION P08_19 VALUES IN (10819),\nPARTITION P08_20 VALUES IN (10820),\nPARTITION P08_21 VALUES IN (10821),\nPARTITION P08_22 VALUES IN (10822),\nPARTITION P08_23 VALUES IN (10823),\nPARTITION P08_24 VALUES IN (10824),\nPARTITION P08_25 VALUES IN (10825),\nPARTITION P08_26 VALUES IN (10826),\nPARTITION P08_27 VALUES IN (10827),\nPARTITION P08_28 VALUES IN (10828),\nPARTITION P08_29 VALUES IN (10829),\nPARTITION P08_30 VALUES IN (10830),\nPARTITION P08_31 VALUES IN (10831),\nPARTITION P09_01 VALUES IN (10901),\nPARTITION P09_02 VALUES IN (10902),\nPARTITION P09_03 VALUES IN (10903),\nPARTITION P09_04 VALUES IN (10904),\nPARTITION P09_05 VALUES IN (10905),\nPARTITION P09_06 VALUES IN (10906),\nPARTITION P09_07 VALUES IN (10907),\nPARTITION P09_08 VALUES IN (10908),\nPARTITION P09_09 VALUES IN (10909),\nPARTITION P09_10 VALUES IN (10910),\nPARTITION P09_11 VALUES IN (10911),\nPARTITION P09_12 VALUES IN (10912),\nPARTITION P09_13 VALUES IN (10913),\nPARTITION P09_14 VALUES IN (10914),\nPARTITION P09_15 VALUES IN (10915),\nPARTITION P09_16 VALUES IN (10916),\nPARTITION P09_17 VALUES IN (10917),\nPARTITION P09_18 VALUES IN (10918),\nPARTITION P09_19 VALUES IN (10919),\nPARTITION P09_20 VALUES IN (10920),\nPARTITION P09_21 VALUES IN (10921),\nPARTITION P09_22 VALUES IN (10922),\nPARTITION P09_23 VALUES IN (10923),\nPARTITION P09_24 VALUES IN (10924),\nPARTITION P09_25 VALUES IN (10925),\nPARTITION P09_26 VALUES IN (10926),\nPARTITION P09_27 VALUES IN (10927),\nPARTITION P09_28 VALUES IN (10928),\nPARTITION P09_29 VALUES IN (10929),\nPARTITION P09_30 VALUES IN (10930),\nPARTITION P10_01 VALUES IN (11001),\nPARTITION P10_02 VALUES IN (11002),\nPARTITION P10_03 VALUES IN (11003),\nPARTITION P10_04 VALUES IN (11004),\nPARTITION P10_05 VALUES IN (11005),\nPARTITION P10_06 VALUES IN (11006),\nPARTITION P10_07 VALUES IN (11007),\nPARTITION P10_08 VALUES IN (11008),\nPARTITION P10_09 VALUES IN (11009),\nPARTITION P10_10 VALUES IN (11010),\nPARTITION P10_11 VALUES IN (11011),\nPARTITION P10_12 VALUES IN (11012),\nPARTITION P10_13 VALUES IN (11013),\nPARTITION P10_14 VALUES IN (11014),\nPARTITION P10_15 VALUES IN (11015),\nPARTITION P10_16 VALUES IN (11016),\nPARTITION P10_17 VALUES IN (11017),\nPARTITION P10_18 VALUES IN (11018),\nPARTITION P10_19 VALUES IN (11019),\nPARTITION P10_20 VALUES IN (11020),\nPARTITION P10_21 VALUES IN (11021),\nPARTITION P10_22 VALUES IN (11022),\nPARTITION P10_23 VALUES IN (11023),\nPARTITION P10_24 VALUES IN (11024),\nPARTITION P10_25 VALUES IN (11025),\nPARTITION P10_26 VALUES IN (11026),\nPARTITION P10_27 VALUES IN (11027),\nPARTITION P10_28 VALUES IN (11028),\nPARTITION P10_29 VALUES IN (11029),\nPARTITION P10_30 VALUES IN (11030),\nPARTITION P10_31 VALUES IN (11031),\nPARTITION P11_01 VALUES IN (11101),\nPARTITION P11_02 VALUES IN (11102),\nPARTITION P11_03 VALUES IN (11103),\nPARTITION P11_04 VALUES IN (11104),\nPARTITION P11_05 VALUES IN (11105),\nPARTITION P11_06 VALUES IN (11106),\nPARTITION P11_07 VALUES IN (11107),\nPARTITION P11_08 VALUES IN (11108),\nPARTITION P11_09 VALUES IN (11109),\nPARTITION P11_10 VALUES IN (11110),\nPARTITION P11_11 VALUES IN (11111),\nPARTITION P11_12 VALUES IN (11112),\nPARTITION P11_13 VALUES IN (11113),\nPARTITION P11_14 VALUES IN (11114),\nPARTITION P11_15 VALUES IN (11115),\nPARTITION P11_16 VALUES IN (11116),\nPARTITION P11_17 VALUES IN (11117),\nPARTITION P11_18 VALUES IN (11118),\nPARTITION P11_19 VALUES IN (11119),\nPARTITION P11_20 VALUES IN (11120),\nPARTITION P11_21 VALUES IN (11121),\nPARTITION P11_22 VALUES IN (11122),\nPARTITION P11_23 VALUES IN (11123),\nPARTITION P11_24 VALUES IN (11124),\nPARTITION P11_25 VALUES IN (11125),\nPARTITION P11_26 VALUES IN (11126),\nPARTITION P11_27 VALUES IN (11127),\nPARTITION P11_28 VALUES IN (11128),\nPARTITION P11_29 VALUES IN (11129),\nPARTITION P11_30 VALUES IN (11130),\nPARTITION P12_01 VALUES IN (11201),\nPARTITION P12_02 VALUES IN (11202),\nPARTITION P12_03 VALUES IN (11203),\nPARTITION P12_04 VALUES IN (11204),\nPARTITION P12_05 VALUES IN (11205),\nPARTITION P12_06 VALUES IN (11206),\nPARTITION P12_07 VALUES IN (11207),\nPARTITION P12_08 VALUES IN (11208),\nPARTITION P12_09 VALUES IN (11209),\nPARTITION P12_10 VALUES IN (11210),\nPARTITION P12_11 VALUES IN (11211),\nPARTITION P12_12 VALUES IN (11212),\nPARTITION P12_13 VALUES IN (11213),\nPARTITION P12_14 VALUES IN (11214),\nPARTITION P12_15 VALUES IN (11215),\nPARTITION P12_16 VALUES IN (11216),\nPARTITION P12_17 VALUES IN (11217),\nPARTITION P12_18 VALUES IN (11218),\nPARTITION P12_19 VALUES IN (11219),\nPARTITION P12_20 VALUES IN (11220),\nPARTITION P12_21 VALUES IN (11221),\nPARTITION P12_22 VALUES IN (11222),\nPARTITION P12_23 VALUES IN (11223),\nPARTITION P12_24 VALUES IN (11224),\nPARTITION P12_25 VALUES IN (11225),\nPARTITION P12_26 VALUES IN (11226),\nPARTITION P12_27 VALUES IN (11227),\nPARTITION P12_28 VALUES IN (11228),\nPARTITION P12_29 VALUES IN (11229),\nPARTITION P12_30 VALUES IN (11230),\nPARTITION P12_31 VALUES IN (11231));\n\n")),(0,A.kt)("h3",{id:"\u9519\u8bef\u793a\u4f8b"},"\u9519\u8bef\u793a\u4f8b"),(0,A.kt)("ol",null,(0,A.kt)("li",{parentName:"ol"},"\u4e3b\u952e\u5fc5\u987b\u5305\u542b\u5206\u533a\u51fd\u6570\u4e2d\u7684\u6240\u6709\u5b57\u6bb5")),(0,A.kt)("blockquote",null,(0,A.kt)("p",{parentName:"blockquote"},"A PRIMARY KEY must include all columns in the table's partitioning function")),(0,A.kt)("p",null,"\u4e0b\u8868\u7684 ",(0,A.kt)("inlineCode",{parentName:"p"},"occur_time")," \u4e0d\u5728\u4e3b\u952e\u4e2d\uff0c\u53ef\u4ee5\u5728\u901a\u8fc7\u7ec4\u5408\u4e3b\u952e\u89e3\u51b3"),(0,A.kt)("pre",null,(0,A.kt)("code",{parentName:"pre",className:"language-SQL"},"CREATE TABLE `t_printer_online_record_partition`  (\n    `id` bigint UNSIGNED NOT NULL COMMENT '\u4e3b\u952eID',\n    `printer_sn` varchar(64) NOT NULL COMMENT '\u6253\u5370\u673aSN',\n    `online` bit NOT NULL COMMENT '\u662f\u5426\u5728\u7ebf,1/\u5728\u7ebf,0/\u79bb\u7ebf',\n    `occur_time` datetime COMMENT '\u53d1\u751f\u65f6\u95f4',\n    `create_time` bigint UNSIGNED NOT NULL COMMENT '\u521b\u5efa\u65f6\u95f4',\n    `create_by` varchar(64) NULL COMMENT '\u521b\u5efa\u4eba',\n    `update_time` bigint UNSIGNED NULL COMMENT '\u66f4\u65b0\u65f6\u95f4',\n    `update_by` varchar(64) NULL COMMENT '\u66f4\u65b0\u4eba',\n    `update_version` int UNSIGNED NOT NULL DEFAULT 0 COMMENT '\u4e50\u89c2\u9501',\n    PRIMARY KEY (`id`)\n) ENGINE = InnoDB CHARACTER SET = utf8mb4 COMMENT = '\u6253\u5370\u673a\u4e0a\u4e0b\u7ebf\u8bb0\u5f55\u5206\u533a\u8868'\nPARTITION BY LIST(\n100+MONTH(occur_time)\n)(\nPARTITION p01 VALUES IN(101),\nPARTITION p02 VALUES IN(102),\nPARTITION p03 VALUES IN(103),\nPARTITION p04 VALUES IN(104),\nPARTITION p05 VALUES IN(105),\nPARTITION p06 VALUES IN(106),\nPARTITION p07 VALUES IN(107),\nPARTITION p08 VALUES IN(108),\nPARTITION p09 VALUES IN(109),\nPARTITION p10 VALUES IN(110),\nPARTITION p11 VALUES IN(111),\nPARTITION p12 VALUES IN(112)\n);\n")),(0,A.kt)("ol",{start:2},(0,A.kt)("li",{parentName:"ol"},"\u552f\u4e00\u952e\u5fc5\u987b\u5305\u542b\u5728\u5206\u533a\u952e\u4e2d")),(0,A.kt)("blockquote",null,(0,A.kt)("p",{parentName:"blockquote"},"1503 - A UNIQUE INDEX must include all columns in the table's partitioning function")),(0,A.kt)("p",null,"\u5982\u679c\u6570\u636e\u8868\u4e2d\u6709\u552f\u4e00\u952e\uff0c\u5219\u552f\u4e00\u952e\u5fc5\u987b\u5305\u542b\u5728\u5206\u533a\u5b57\u6bb5\u4e2d\u3002\u4e0b\u8868\u4e2d\u7684UK(printer_sn) \u4e0d\u5728\u5206\u533a\u8868\u8fbe\u5f0f\u4e2d"),(0,A.kt)("p",null,(0,A.kt)("a",{parentName:"p",href:"https://dev.mysql.com/doc/refman/5.7/en/partitioning-limitations-partitioning-keys-unique-keys.html"},"https://dev.mysql.com/doc/refman/5.7/en/partitioning-limitations-partitioning-keys-unique-keys.html")),(0,A.kt)("blockquote",null,(0,A.kt)("p",{parentName:"blockquote"},"\xa0",(0,A.kt)("em",{parentName:"p"},"every unique key on the table must use every column in the table's partitioning expression"),". (This also includes the table's primary key, since it is by definition a unique key.")),(0,A.kt)("pre",null,(0,A.kt)("code",{parentName:"pre",className:"language-SQL"},"CREATE TABLE `t_printer_online_record_partition`  (\n    `id` bigint UNSIGNED NOT NULL COMMENT '\u4e3b\u952eID',\n    `printer_sn` varchar(64) NOT NULL COMMENT '\u6253\u5370\u673aSN',\n    `online` bit NOT NULL COMMENT '\u662f\u5426\u5728\u7ebf,1/\u5728\u7ebf,0/\u79bb\u7ebf',\n    `occur_time` datetime COMMENT '\u53d1\u751f\u65f6\u95f4',\n    `create_time` bigint UNSIGNED NOT NULL COMMENT '\u521b\u5efa\u65f6\u95f4',\n    `create_by` varchar(64) NULL COMMENT '\u521b\u5efa\u4eba',\n    `update_time` bigint UNSIGNED NULL COMMENT '\u66f4\u65b0\u65f6\u95f4',\n    `update_by` varchar(64) NULL COMMENT '\u66f4\u65b0\u4eba',\n    `update_version` int UNSIGNED NOT NULL DEFAULT 0 COMMENT '\u4e50\u89c2\u9501',\n    PRIMARY KEY (`id`, `occur_time`),\n    UNIQUE KEY (`printer_sn`)\n) ENGINE = InnoDB CHARACTER SET = utf8mb4 COMMENT = '\u6253\u5370\u673a\u4e0a\u4e0b\u7ebf\u8bb0\u5f55\u5206\u533a\u8868'\nPARTITION BY LIST(\n100+MONTH(occur_time)\n)(\nPARTITION p01 VALUES IN(101),\nPARTITION p02 VALUES IN(102),\nPARTITION p03 VALUES IN(103),\nPARTITION p04 VALUES IN(104),\nPARTITION p05 VALUES IN(105),\nPARTITION p06 VALUES IN(106),\nPARTITION p07 VALUES IN(107),\nPARTITION p08 VALUES IN(108),\nPARTITION p09 VALUES IN(109),\nPARTITION p10 VALUES IN(110),\nPARTITION p11 VALUES IN(111),\nPARTITION p12 VALUES IN(112)\n);\n")),(0,A.kt)("ol",{start:3},(0,A.kt)("li",{parentName:"ol"},"\u51fd\u6570\u4e0d\u53ef\u7528 FROM_UNIXTIME()")),(0,A.kt)("blockquote",null,(0,A.kt)("p",{parentName:"blockquote"},"1564 - This partition function is not allowed\nConstant, random or timezone-dependent expressions in (sub)partitioning function are not allowed")),(0,A.kt)("p",null,"\u5206\u533a\u8868\u8fbe\u5f0f\u4e2d\u53ef\u4ee5\u4f7f\u7528\u7684\u51fd\u6570\u6709\u9650\u5236\uff0c\u53ea\u80fd\u4f7f\u7528\u4ee5\u4e0b ",(0,A.kt)("a",{parentName:"p",href:"https://dev.mysql.com/doc/refman/5.7/en/partitioning-limitations-functions.html"},"\u51fd\u6570"),"\u3002",(0,A.kt)("inlineCode",{parentName:"p"},"FROM_UNIXTIME")," "),(0,A.kt)("pre",null,(0,A.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE `t_printer_online_record_partition`  (\n    `id` bigint UNSIGNED NOT NULL COMMENT '\u4e3b\u952eID',\n    `printer_sn` varchar(64) NOT NULL COMMENT '\u6253\u5370\u673aSN',\n    `online` bit NOT NULL COMMENT '\u662f\u5426\u5728\u7ebf,1/\u5728\u7ebf,0/\u79bb\u7ebf',\n    `occur_time` datetime COMMENT '\u53d1\u751f\u65f6\u95f4',\n    `create_time` bigint UNSIGNED NOT NULL COMMENT '\u521b\u5efa\u65f6\u95f4',\n    `create_by` varchar(64) NULL COMMENT '\u521b\u5efa\u4eba',\n    `update_time` bigint UNSIGNED NULL COMMENT '\u66f4\u65b0\u65f6\u95f4',\n    `update_by` varchar(64) NULL COMMENT '\u66f4\u65b0\u4eba',\n    `update_version` int UNSIGNED NOT NULL DEFAULT 0 COMMENT '\u4e50\u89c2\u9501',\n    PRIMARY KEY (`id`,create_time)\n) ENGINE = InnoDB CHARACTER SET = utf8mb4 COMMENT = '\u6253\u5370\u673a\u4e0a\u4e0b\u7ebf\u8bb0\u5f55\u5206\u533a\u8868'\nPARTITION BY LIST(\n100+MONTH(FROM_UNIXTIME(occur_time DIV 1000))\n)(\nPARTITION p01 VALUES IN(101),\nPARTITION p02 VALUES IN(102),\nPARTITION p03 VALUES IN(103),\nPARTITION p04 VALUES IN(104),\nPARTITION p05 VALUES IN(105),\nPARTITION p06 VALUES IN(106),\nPARTITION p07 VALUES IN(107),\nPARTITION p08 VALUES IN(108),\nPARTITION p09 VALUES IN(109),\nPARTITION p10 VALUES IN(110),\nPARTITION p11 VALUES IN(111),\nPARTITION p12 VALUES IN(112)\n);\n")),(0,A.kt)("h2",{id:"\u7406\u89e3\u5206\u533a\u952e\u4e0e-pkuk-\u7684\u5173\u7cfb"},"\u7406\u89e3\u5206\u533a\u952e\u4e0e ",(0,A.kt)("inlineCode",{parentName:"h2"},"pk"),"\u3001",(0,A.kt)("inlineCode",{parentName:"h2"},"uk")," \u7684\u5173\u7cfb"),(0,A.kt)("blockquote",null,(0,A.kt)("p",{parentName:"blockquote"},"[!TIP]"," All columns used in the table's partitioning expression must be part of every unique key that the table may have, including any primary key.")),(0,A.kt)("blockquote",null,(0,A.kt)("p",{parentName:"blockquote"},"[!TIP]"," In other words,\xa0",(0,A.kt)("em",{parentName:"p"},"every unique key on the table must use every column in the table's partitioning expression"),". (This also includes the table's primary key, since it is by definition a unique key. This particular case is discussed later in this section.)")),(0,A.kt)("p",null,"A PRIMARY KEY must include all columns in the table's partitioning function"),(0,A.kt)("p",null,"\u5728\u5206\u533a\u51fd\u6570\u4e2d\u7684\u5b57\u6bb5\uff0c\u5fc5\u987b\u662f\u8868\u4e2d primary key \u548c unique key \u7684\u4e00\u90e8\u5206\u3002(\u5982\u679c\u540c\u65f6\u6709pk\u548cuk\uff0c\u5219pk\u548cuk\u5fc5\u987b\u6709\u516c\u5171\u7684\u5b57\u6bb5\uff0c\u5426\u5219\u65e0\u6cd5\u505a\u5206\u533a)"),(0,A.kt)("p",null,"\u5982\u679c\u6ca1\u6709pk, uk\uff0c\u5c31\u6ca1\u6709\u8fd9\u4e9b\u9650\u5236"),(0,A.kt)("p",null,"\u5206\u533a\u6700\u5927\u6570\u4e3a ",(0,A.kt)("inlineCode",{parentName:"p"},"8092")),(0,A.kt)("h2",{id:"\u53c2\u8003"},"\u53c2\u8003"),(0,A.kt)("ul",null,(0,A.kt)("li",{parentName:"ul"},(0,A.kt)("a",{parentName:"li",href:"https://segmentfault.com/a/1190000022780773"},"MySQL\u5206\u533a\u8868\u6700\u4f73\u5b9e\u8df5")),(0,A.kt)("li",{parentName:"ul"},(0,A.kt)("a",{parentName:"li",href:"https://www.jianshu.com/p/1cdd3e3c5b3c"},"mysql\u8868\u5206\u533a\u8be6\u89e3")),(0,A.kt)("li",{parentName:"ul"},(0,A.kt)("a",{parentName:"li",href:"https://dev.mysql.com/doc/refman/5.7/en/partitioning-overview.html"},"https://dev.mysql.com/doc/refman/5.7/en/partitioning-overview.html")),(0,A.kt)("li",{parentName:"ul"},(0,A.kt)("a",{parentName:"li",href:"https://developpaper.com/restrictions-on-mysql-table-partition/"},"\u5206\u533a\u8868\u7684\u9650\u5236")),(0,A.kt)("li",{parentName:"ul"},(0,A.kt)("a",{parentName:"li",href:"https://www.codeleading.com/article/55126299663/"},"MySQL \u65e5\u671f\u65f6\u95f4\u5206\u533a\u95ee\u9898"))))}a.isMDXComponent=!0}}]);